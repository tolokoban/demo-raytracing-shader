{"intl":"var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n","src":"/** @module wdg */require( 'wdg', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    'use strict';\n\n/**\n * Widgets inherit this class.\n */\nfunction Widget(options) {\n    this.__data = {};\n    try {\n        var e;\n        if (typeof options === 'undefined') options = {};\n        if (typeof options.innerHTML !== 'undefined' && typeof options.childNodes !== 'undefined') {\n            // On passe directement un élément.\n            options = {element: options};\n        }\n        if (typeof options.tag === 'undefined') options.tag = \"div\";\n        if (options.element) {\n            this.element(options.element);\n        } else if (typeof options.id !== 'undefined') {\n            e = window.document.getElementById(options.id);\n            if (!e) {\n                throw Error(\"Can't find element with id: \\\"\" + options.id + \"\\\"!\");\n            }\n            this.element(e);\n        } else {\n            this.element(window.document.createElement(options.tag));\n            this.addClass(\"wdg\", \"custom\");\n        }\n    }\n    catch (ex) {\n        console.error(\"[widget] \", ex);\n        console.error(\"[Widget] \", JSON.stringify(options));\n        throw Error(ex);\n    }\n}\n\nWidget.prototype = {\n    /**\n     * Accessor for attribute element\n     * @return element\n     */\n    element: function(v) {\n        if (v === undefined) return this._element;\n        if (typeof v === 'string') {\n            v = window.document.querySelector(v);\n        }\n        this._element = v;\n        return this;\n    },\n\n    data: function(k, v) {\n        if (typeof v === 'undefined') {\n            return this.__data[k];\n        }\n        this.__data[k] = v;\n        return this;\n    },\n\n    /**\n     * Remove this element from its parent.\n     * @memberof wdg\n     */\n    detach: function() {\n        var e = this._element;\n        if (e) {\n            var p = e.parentNode;\n            if (p) {\n                p.removeChild(e);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * @param name\n     * @memberof wdg\n     */\n    addEvent: function(name, slot, sender) {\n        if (typeof slot === 'string') {\n            var that = this, key = slot;\n            if (typeof sender === 'undefined') sender = this;\n            slot = function(x) {\n                var f = sender[key];\n                if (typeof f === 'function') {\n                    f.call(sender, x);\n                } else {\n                    throw Error(\"\\\"\" + slot + \"\\\" is not a function of: \" + sender);\n                }\n            };\n        }\n        var e = this.element();\n        if (name == 'tap') {\n            e.addEventListener(\n                \"mousedown\",\n                function(evt) {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                },\n                false\n            );\n            e.addEventListener(\n                \"mouseup\",\n                function(evt) {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                    slot(evt);\n                },\n                false\n            );\n            e.addEventListener(\"touchend\", slot, false);\n\n        } else {\n            e.addEventListener(name, slot, false);\n        }\n        return this;\n    },\n\n    /**\n     * Retire un attribut à l'élément sous-jacent.\n     * @example\n     * this.removeAttr(\"selected\");\n     * @memberof wdg\n     */\n    removeAttr: function() {\n        if (this._element) {\n            var i, arg;\n            for (i = 0 ; i < arguments.length ; i++) {\n                arg = arguments[i];\n                this._element.removeAttribute(arg);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * Teste l'existence d'un attribut dans l'élément sous-jacent.\n     * @memberof wdg\n     */\n    hasAttribute: function(key) {\n        if (!this._element) return false;\n        return this._element.hasAttribute(key);\n    },\n\n    /**\n     * Lit ou affecte la valeur d'un attribut de l'élément sous-jacent.\n     * @example\n     * // Le pseudo attribut '$' sert à insérer du texte.\n     * var div = new Widget();\n     * div.attr({$: 'Hello world!', title: 'Typical first sentence...'});\n     * @param key Nom de l'attribut ou dictionnaire des attributs.\n     * @param val [Facultatif] Valeur de l'attribut. Si elle est omise, la méthode retourne la valeur actuelle.\n     * @param ns [Facultatif] Namespace éventuel.\n     * @memberof wdg\n     */\n    attr: function(key, val, ns) {\n        var k;\n        if (!this._element || !this._element.getAttribute) return null;\n        if (typeof key == \"string\") {\n            if (val !== undefined) {\n                if (key == \"class\") {\n                    this._element.className = val;\n                    return this;\n                }\n                if (ns && this._element.setAttributeNS) {\n                    this._element.setAttributeNS(ns, key, val);\n                }\n                else {\n                    this._element.setAttribute(key, val);\n                }\n                return this;\n            }\n            return this._element.getAttribute(key);\n        }\n        if (typeof key == \"object\") {\n            for (k in key) {\n                if (k == \"class\") {\n                    this._element.className = key[k];\n                } else if (k == \"$\") {\n                    this.text(key[k]);\n                } else {\n                    this._element.setAttribute(k, key[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n\n    /**\n     * Permet de changer le style de l'élément sous-jacent.\n     * @example\n     * this.css(\"color\", \"red\");\n     * alert(this.css(\"display\"));\n     * this.css(\n     *   {\n     *     margin: \"0px\",\n     *     padding: \"3px\",\n     *     border: \"1px solid black\"\n     *   }\n     * );\n     * @param key Nom du champ de style ou dictionnaire clefs/valeurs.\n     * @param val  Valeur du champ key.  S'il est omis et  que \"key\"\n     * est  de type  string,  alors la  méthode  retourne la  valeur\n     * actuelle.\n     * @memberof wdg\n     */\n    css: function(key, val) {\n        var k, e = this._element;\n        if (!e) return null;\n        if (typeof e.style !== 'object') {\n            console.error(\"[wdg.css] This element does not support styles!\", e);\n            e.style = {};\n        }\n        if (typeof key == 'string') {\n            if (val) {\n                e.style[key] = val;\n                return this;\n            }\n            return e.style[key];\n        }\n        if (typeof key == 'object') {\n            for (k in key) {\n                try {\n                    e.style[k] = key[k];\n                } catch (x) {\n                    console.error(\"[wdg.css] Bad CSS attribute \" + k + \": \" + key[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n    insertAfter: function(target) {\n        if (typeof target.element === 'function') {\n            target = target.element();\n        }\n        target.parentNode.insertBefore(this.element(), target.nextSibling);\n        return this;\n    },\n\n    insertBefore: function(target) {\n        if (typeof target.element === 'function') {\n            target = target.element();\n        }\n        target.parentNode.insertBefore(this.element(), target);\n        return this;\n    },\n\n    /**\n     * Append children to this widget.\n     */\n    append: function() {\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (typeof arg === 'number') arg = \"\" + arg;\n            if (typeof arg === 'undefined' || typeof arg === 'null'\n                || (typeof arg !== 'object' && typeof arg !== 'string')) {\n                console.error(\"[Widget.append] Argument #\" + i + \" is invalid!\", arguments);\n                console.error(\"[Widget.append] Is type is: \" + (typeof arg));\n                continue;\n            };\n            if (typeof arg === 'string') {\n                if (arg.length < 1) arg = \" \";\n                arg = window.document.createTextNode(arg);\n                if (!arg) {\n                    console.error(\n                        \"[Widget.append] Unable to create a text node with this text: \", arg\n                    );\n                    console.error(\"[wdg] arguments=...\", arguments);\n                    throw Error(\n                        \"[Widget.append] Unable to create a text node with this text: \"\n                            + JSON.stringify(arg)\n                    );\n                }\n            }\n            if (Array.isArray(arg)) {\n                arg.forEach(\n                    function(item) {\n                        this.append(item);\n                    }, this\n                );\n            } else {\n                var e = arg;\n                if( typeof e.element === 'function' ) e = e.element();\n                else if( e.element ) e = e.element;\n                this._element.appendChild(e);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * Append this widget to a parent.\n     * @param parent\n     * @memberof wdg\n     */\n    appendTo: function(parent) {\n        if (!parent) return this;\n        if (typeof parent.append === 'function') {\n            parent.append(this);\n        } else if (typeof parent.appendChild === 'function') {\n            parent.appendChild(this._element);\n            this.onAppend();\n        }\n        return this;\n    },\n\n    /**\n     * Append this widget to BODY.\n     * @memberof wdg\n     */\n    appendToBody: function() {\n        window.document.body.appendChild(this._element);\n        return this;\n    },\n\n    hasClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (!e.contains(arg)) return false;\n        }\n        return true;\n    },\n\n    /**\n     * Add CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    addClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (typeof arg === 'string') {\n                arg = arg.trim();\n                if (arg.length > 0) e.add(arg);\n            } else {\n                console.error(\"[wdg.addClass] Arguments with bad type!\", arguments);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * Remove CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    removeClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            e.remove(arg);\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Toggle CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    toggleClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            e.toggle(arg);\n        }\n        return this;\n    },\n\n    /**\n     * Remove all children of this widget.\n     * Any argument passed will be appended to this widget.\n     * @memberof wdg\n     */\n    clear: function() {\n        // (!) On préfère retirer les éléments un par un du DOM plutôt que d'utiliser simplement\n        // this.html(\"\").\n        // En effet, le code simplifié a des conséquences inattendues dans IE9 et IE10 au moins.\n        // Le bug des markers qui disparaissaients sur les cartes de Trail-Passion 4 a été corrigé\n        // avec cette modification.\n        var e = this.element();\n        while(e.firstChild){\n            e.removeChild(e.firstChild);\n        }\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            this.append(arg);\n        }\n\n        return this;\n    },\n\n    /**\n     * 1) Sans argument, cette  fonction retourne le texte contenu\n     * dans ce widget.\n     * 2) Avec  un texte en  argument, cette fonction  retire tous\n     * les  enfants de  ce widget  et  les remplace  par un  noeud\n     * texte.\n     * 3)  Avec un  élément  du DOM  en  argument, cette  fonction\n     * retourne le texte contenu par ce dernier.\n     * @memberof tfw.Widget\n     */\n    text: function(arg) {\n        var e, text, i, child;\n        if (typeof arg == 'string' || typeof arg == 'number') {\n            arg = '' + arg;\n            if (arg.substr(0, 6) == '<html>') return this.html( arg.substr( 6 ) );\n            \n            this.clear();\n            this._element.appendChild(window.document.createTextNode(arg));\n            return this;\n        } else {\n            // On retourne le contenu textuel de ce widget.\n            e = this._element;\n            if (arg !== undefined) {\n                // On peut passer un élément du DOM pour en extraire son contenu textuel.\n                e = arg;\n            }\n            text = \"\";\n            if (e.childNodes) {\n                for (i=0 ; i<e.childNodes.length ; i++) {\n                    child = e.childNodes[i];\n                    if (child.nodeType == 3) {\n                        if (child.nodeValue) {\n                            text += child.nodeValue;\n                        }\n                    } else {\n                        text += this.text( child );\n                    }\n                }\n            }\n            return text;\n        }\n    },\n\n    /**\n     *\n     * @param html\n     * @memberof wdg\n     */\n    html: function(html) {\n        if (typeof html === 'undefined') return this._element.innerHTML;\n        if (this._element) this._element.innerHTML = html;\n        return this;\n    },\n\n    /**\n     * If applicable, give focus to this element.\n     * @memberof wdg\n     */\n    focus: function() {\n        var e = this._element;\n        if (!e) return this;\n        if (typeof e.focus === 'function') {\n            e.focus();\n        }\n        return this;\n    },\n\n    /**\n     * Returns the bounds of the underlying element.\n     * @memberof wdg\n     */\n    rect: function() {\n        var e = this._element;\n        if (!e) return null;\n        if (typeof e.getBoundingClientRect !== 'function') {\n            console.error(\"[wdg.rect] This element has non `getBoundingClientRect` function:\", e);\n        }\n        var r = e.getBoundingClientRect();\n        if( typeof r.width === 'undefined' ) r.width = r.right - r.left;\n        if( typeof r.height === 'undefined' ) r.height = r.bottom - r.top;\n        return r;\n    },\n\n    /**\n     *\n     * @param\n     * @memberof wdg\n     */\n    Tap: function(slot, sender) {\n        if (typeof slot === 'undefined') return this._Tap;\n        var that = this;\n        if (typeof sender === 'undefined') sender = that;\n        if (typeof slot === 'string') slot = sender[slot];\n        if (!this._Tap) {\n            this.activatePointerEvents();\n        }\n        this._Tap = [slot, sender];\n        return this;\n    }\n};\n\n/**\n * @return void\n */\nWidget.prototype.activatePointerEvents = function() {\n    if (this._pointerEvents) return this;\n    this._pointerEvents = {start: 0};\n\n    /*\n     interact(this.element()).on(\"tap\", function(evt) {\n     var slot = that._Tap;\n     if (slot) {\n     slot[0].call(slot[1], {x: evt.x, y: evt.y});\n     }\n     });\n     return this;\n     */\n    var pe = this._pointerEvents;\n    var that = this;\n    this.addEvent(\n        \"touchstart\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            pe.touch = 1;\n            pe.start = Date.now();\n        }\n    );\n    this.addEvent(\n        \"touchend\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            var tap = that._Tap;\n            if (!tap) return;\n            pe.touch = 0;\n            var delta = Date.now() - pe.start;\n            if (delta < 900) {\n                tap[0].call(tap[1], evt);\n            }\n        }\n    );\n    this.addEvent(\n        \"mousedown\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            if (pe.touch) return;\n            pe.start = Date.now();\n        }\n    );\n    this.addEvent(\n        \"mouseup\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            var tap = that._Tap;\n            if (!tap) return;\n            var delta = Date.now() - pe.start;\n            if (delta < 900) {\n                tap[0].call(tap[1], evt);\n            }\n        }\n    );\n\n    return this;\n};\n\n/**\n * @return void\n */\nWidget.prototype.div = function() {\n    var div = new Widget();\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.prototype.tag = function(tag) {\n    if (typeof tag === 'undefined') tag = 'div';\n    var div = new Widget({tag: tag});\n    for (var i = 1 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\n/**\n * @return void\n */\nWidget.prototype.isInDOM = function() {\n    return Widget.isInDOM(this.element());\n};\n\n/**\n * Fonction à surcharger  si on veut réagir lors de  l'insertion dans le\n * DOM.\n */\nWidget.prototype.onAppend = function() {};\n\nWidget.create = function(args) {\n    return new Widget(args);\n};\n\nWidget.find = function(query) {\n    return new Widget({element: window.document.querySelector(query)});\n};\n\n\n/**\n * Create a SVG élément with attributes.\n */\nWidget.svg = function(tag, attribs) {\n    var namespace = \"http://www.w3.org/2000/svg\";\n    if (typeof tag === 'object') {\n        attribs = tag;\n        tag = \"svg\";\n    }\n    if (typeof tag !== 'string') tag = 'svg';\n    var e = window.document.createElementNS(namespace, tag);\n    var w = new Widget({element: e});\n    if (typeof attribs === 'undefined') attribs = {};\n    if (tag == 'svg') {\n        if (typeof attribs.version === 'undefined') attribs.version = \"1.1\";\n        if (typeof attribs['xmlns:svg'] === 'undefined') {\n            attribs['xmlns:svg'] = 'http://www.w3.org/2000/svg';\n        }\n        if (typeof attribs['xmlns'] === 'undefined') {\n            attribs['xmlns'] = 'http://www.w3.org/2000/svg';\n        }\n        if (typeof attribs['xmlns:xlink'] === 'undefined') {\n            attribs['xmlns:xlink'] = 'http://www.w3.org/1999/xlink';\n        }\n        if (typeof attribs.viewBox === 'undefined'\n            && typeof attribs.width === 'number'\n            && typeof attribs.height === 'number')\n        {\n            attribs.viewBox = \"0 0 \" + attribs.width + \" \" + attribs.height;\n        }\n    }\n    if (typeof attribs === 'object') {\n        w.attr(attribs);\n    }\n    return w;\n};\n\n/**\n * Tester si le widget ou élément est actuellement attaché au DOM.\n */\nWidget.isInDOM = function(e) {\n    if (!e) return false;\n    if (typeof e.element === 'function') {\n        e = e.element();\n    }\n    if (e === window.document) return true;\n    return Widget.isInDOM(e.parentNode);\n};\n\n/**\n * Create a `span` with a text or an HTML content.\n * If `txt` starts with `<html>`, we set an HTML content.\n */\nWidget.fromTextOrHtml = function(txt) {\n    var e = Widget.span();\n    if (txt.substr(0, 6) == '<html>') {\n        e.html(txt.substr(6));\n    } else {\n        e.text(txt);\n    }\n    return e;\n};\n\n/**\n * Create a DIV and apply all arguments as classes to it.\n */\nWidget.div = function() {\n    var div = new Widget({tag: \"div\"});\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\n/**\n * Create a SPAN and apply all arguments as classes to it.\n */\nWidget.span = function() {\n    var div = new Widget({tag: \"span\"});\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.tag = function(tag) {\n    if (typeof tag === 'undefined') tag = 'div';\n    var div = new Widget({tag: tag});\n    for (var i = 1 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.id = function(id) {\n    return new Widget({element: window.document.getElementById(id)});\n};\n\n/**\n * Widget defining the `document.body` element.\n */\nWidget.body = new Widget(window.document.body);\n\nmodule.exports = Widget;\n\n\n\n/*\n * classList.js: Cross-browser full element.classList implementation.\n * 2014-07-23\n *\n * http://purl.eligrey.com/github/classList.js/blob/master/classList.js\n *\n * By Eli Grey, http://eligrey.com\n * Public Domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\n// Full polyfill for browsers with no classList support\nif (!(\"classList\" in window.document.createElement(\"_\"))) {\n    (function () {\n        \"use strict\";\n\n        if (!('Element' in window)) return;\n\n        var classListProp = \"classList\";\n        var protoProp = \"prototype\";\n        var elemCtrProto = window.Element[protoProp];\n        var objCtr = Object;\n        var strTrim = String.prototype.trim || function () {\n            var rx = new RegExp(\"^\\\\s+|\\\\s+$\", \"g\");\n            return this.replace(rx, '');\n        };\n        var arrIndexOf = Array[protoProp].indexOf || function (item) {\n            var\n            i = 0\n            , len = this.length\n            ;\n            for (; i < len; i++) {\n                if (i in this && this[i] === item) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n        // Vendors: please allow content code to instantiate DOMExceptions\n        , DOMEx = function (type, message) {\n            this.name = type;\n            this.code = DOMException[type];\n            this.message = message;\n        }\n        , checkTokenAndGetIndex = function (classList, token) {\n            if (token === \"\") {\n                throw new DOMEx(\n                    \"SYNTAX_ERR\"\n                    , \"An invalid or illegal string was specified\"\n                );\n            }\n            if ((new RegExp(\"\\\\s\")).test(token)) {\n                throw new DOMEx(\n                    \"INVALID_CHARACTER_ERR\"\n                    , \"String contains an invalid character\"\n                );\n            }\n            return arrIndexOf.call(classList, token);\n        }\n        , ClassList = function (elem) {\n            var\n            trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n            , classes = trimmedClasses ? trimmedClasses.split(new RegExp(\"\\\\s+\")) : []\n            , i = 0\n            , len = classes.length\n            ;\n            for (; i < len; i++) {\n                this.push(classes[i]);\n            }\n            this._updateClassName = function () {\n                elem.setAttribute(\"class\", this.toString());\n            };\n        }\n        , classListProto = ClassList[protoProp] = []\n        , classListGetter = function () {\n            return new ClassList(this);\n        }\n        ;\n\n        // Most DOMException implementations don't allow calling DOMException's toString()\n        // on non-DOMExceptions. Error's toString() is sufficient here.\n        DOMEx[protoProp] = Error[protoProp];\n        classListProto.item = function (i) {\n            return this[i] || null;\n        };\n        classListProto.contains = function (token) {\n            token += \"\";\n            return checkTokenAndGetIndex(this, token) !== -1;\n        };\n        classListProto.add = function () {\n            var\n            tokens = arguments\n            , i = 0\n            , l = tokens.length\n            , token\n            , updated = false\n            ;\n            do {\n                token = tokens[i] + \"\";\n                if (checkTokenAndGetIndex(this, token) === -1) {\n                    this.push(token);\n                    updated = true;\n                }\n            }\n            while (++i < l);\n\n            if (updated) {\n                this._updateClassName();\n            }\n        };\n        classListProto.remove = function () {\n            var\n            tokens = arguments\n            , i = 0\n            , l = tokens.length\n            , token\n            , updated = false\n            , index\n            ;\n            do {\n                token = tokens[i] + \"\";\n                index = checkTokenAndGetIndex(this, token);\n                while (index !== -1) {\n                    this.splice(index, 1);\n                    updated = true;\n                    index = checkTokenAndGetIndex(this, token);\n                }\n            }\n            while (++i < l);\n\n            if (updated) {\n                this._updateClassName();\n            }\n        };\n        classListProto.toggle = function (token, force) {\n            token += \"\";\n\n            var\n            result = this.contains(token)\n            , method = result ?\n                force !== true && \"remove\"\n                :\n                force !== false && \"add\"\n            ;\n\n            if (method) {\n                this[method](token);\n            }\n\n            if (force === true || force === false) {\n                return force;\n            } else {\n                return !result;\n            }\n        };\n        classListProto.toString = function () {\n            return this.join(\" \");\n        };\n\n        if (objCtr.defineProperty) {\n            var classListPropDesc = {\n                get: classListGetter, enumerable: true, configurable: true\n            };\n            try {\n                objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n            } catch (ex) { // IE 8 doesn't support enumerable:true\n                if (ex.number === -0x7FF5EC54) {\n                    classListPropDesc.enumerable = false;\n                    objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n                }\n            }\n        } else if (objCtr[protoProp].__defineGetter__) {\n            elemCtrProto.__defineGetter__(classListProp, classListGetter);\n        }\n    }());\n} else {\n    // There is full or partial native classList support, so just check if we need\n    // to normalize the add/remove and toggle APIs.\n    (function () {\n        \"use strict\";\n\n        var testElement = window.document.createElement(\"_\");\n\n        testElement.classList.add(\"c1\", \"c2\");\n\n        // Polyfill for IE 10/11 and Firefox <26, where classList.add and\n        // classList.remove exist but support only one argument at a time.\n        if (!testElement.classList.contains(\"c2\")) {\n            var createMethod = function(method) {\n                var original = DOMTokenList.prototype[method];\n\n                DOMTokenList.prototype[method] = function(token) {\n                    var i, len = arguments.length;\n\n                    for (i = 0; i < len; i++) {\n                        token = arguments[i];\n                        original.call(this, token);\n                    }\n                };\n            };\n            createMethod('add');\n            createMethod('remove');\n        }\n\n        testElement.classList.toggle(\"c3\", false);\n\n        // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n        // support the second argument.\n        if (testElement.classList.contains(\"c3\")) {\n            var _toggle = DOMTokenList.prototype.toggle;\n\n            DOMTokenList.prototype.toggle = function(token, force) {\n                if (1 in arguments && !this.contains(token) === !force) {\n                    return force;\n                } else {\n                    return _toggle.call(this, token);\n                }\n            };\n\n        }\n        testElement = null;\n    }());\n}\n\n\n  \nmodule.exports._ = _;\n/**\n * @module wdg\n * @see module:$\n\n */\n});","zip":"require(\"wdg\",function(t,e,n){function i(t){this.__data={};try{var e;if(void 0===t&&(t={}),void 0!==t.innerHTML&&void 0!==t.childNodes&&(t={element:t}),void 0===t.tag&&(t.tag=\"div\"),t.element)this.element(t.element);else if(void 0!==t.id){if(!(e=window.document.getElementById(t.id)))throw Error(\"Can't find element with id: \\\"\"+t.id+'\"!');this.element(e)}else this.element(window.document.createElement(t.tag)),this.addClass(\"wdg\",\"custom\")}catch(e){throw console.error(\"[widget] \",e),console.error(\"[Widget] \",JSON.stringify(t)),Error(e)}}var r=function(){function e(){return i(n,arguments)}var n={en:{},fr:{}},i=t(\"$\").intl;return e.all=n,e}();i.prototype={element:function(t){return void 0===t?this._element:(\"string\"==typeof t&&(t=window.document.querySelector(t)),this._element=t,this)},data:function(t,e){return void 0===e?this.__data[t]:(this.__data[t]=e,this)},detach:function(){var t=this._element;if(t){var e=t.parentNode;e&&e.removeChild(t)}return this},addEvent:function(t,e,n){if(\"string\"==typeof e){var i=e;void 0===n&&(n=this),e=function(t){var r=n[i];if(\"function\"!=typeof r)throw Error('\"'+e+'\" is not a function of: '+n);r.call(n,t)}}var r=this.element();return\"tap\"==t?(r.addEventListener(\"mousedown\",function(t){t.preventDefault(),t.stopPropagation()},!1),r.addEventListener(\"mouseup\",function(t){t.preventDefault(),t.stopPropagation(),e(t)},!1),r.addEventListener(\"touchend\",e,!1)):r.addEventListener(t,e,!1),this},removeAttr:function(){if(this._element){var t,e;for(t=0;t<arguments.length;t++)e=arguments[t],this._element.removeAttribute(e)}return this},hasAttribute:function(t){return!!this._element&&this._element.hasAttribute(t)},attr:function(t,e,n){var i;if(!this._element||!this._element.getAttribute)return null;if(\"string\"==typeof t)return void 0!==e?\"class\"==t?(this._element.className=e,this):(n&&this._element.setAttributeNS?this._element.setAttributeNS(n,t,e):this._element.setAttribute(t,e),this):this._element.getAttribute(t);if(\"object\"==typeof t)for(i in t)\"class\"==i?this._element.className=t[i]:\"$\"==i?this.text(t[i]):this._element.setAttribute(i,t[i]);return this},css:function(t,e){var n,i=this._element;if(!i)return null;if(\"object\"!=typeof i.style&&(console.error(\"[wdg.css] This element does not support styles!\",i),i.style={}),\"string\"==typeof t)return e?(i.style[t]=e,this):i.style[t];if(\"object\"==typeof t)for(n in t)try{i.style[n]=t[n]}catch(e){console.error(\"[wdg.css] Bad CSS attribute \"+n+\": \"+t[n])}return this},insertAfter:function(t){return\"function\"==typeof t.element&&(t=t.element()),t.parentNode.insertBefore(this.element(),t.nextSibling),this},insertBefore:function(t){return\"function\"==typeof t.element&&(t=t.element()),t.parentNode.insertBefore(this.element(),t),this},append:function(){var t,e;for(t=0;t<arguments.length;t++)if(e=arguments[t],\"number\"==typeof e&&(e=\"\"+e),void 0===e||\"null\"==typeof e||\"object\"!=typeof e&&\"string\"!=typeof e)console.error(\"[Widget.append] Argument #\"+t+\" is invalid!\",arguments),console.error(\"[Widget.append] Is type is: \"+typeof e);else{if(\"string\"==typeof e&&(e.length<1&&(e=\" \"),!(e=window.document.createTextNode(e))))throw console.error(\"[Widget.append] Unable to create a text node with this text: \",e),console.error(\"[wdg] arguments=...\",arguments),Error(\"[Widget.append] Unable to create a text node with this text: \"+JSON.stringify(e));if(Array.isArray(e))e.forEach(function(t){this.append(t)},this);else{var n=e;\"function\"==typeof n.element?n=n.element():n.element&&(n=n.element),this._element.appendChild(n)}}return this},appendTo:function(t){return t?(\"function\"==typeof t.append?t.append(this):\"function\"==typeof t.appendChild&&(t.appendChild(this._element),this.onAppend()),this):this},appendToBody:function(){return window.document.body.appendChild(this._element),this},hasClass:function(){var t,e,n=this._element.classList;for(t=0;t<arguments.length;t++)if(e=arguments[t],!n.contains(e))return!1;return!0},addClass:function(){var t,e,n=this._element.classList;for(t=0;t<arguments.length;t++)e=arguments[t],\"string\"==typeof e?(e=e.trim(),e.length>0&&n.add(e)):console.error(\"[wdg.addClass] Arguments with bad type!\",arguments);return this},removeClass:function(){var t,e,n=this._element.classList;for(t=0;t<arguments.length;t++)e=arguments[t],n.remove(e);return this},toggleClass:function(){var t,e,n=this._element.classList;for(t=0;t<arguments.length;t++)e=arguments[t],n.toggle(e);return this},clear:function(){for(var t=this.element();t.firstChild;)t.removeChild(t.firstChild);var e,n;for(e=0;e<arguments.length;e++)n=arguments[e],this.append(n);return this},text:function(t){var e,n,i,r;if(\"string\"==typeof t||\"number\"==typeof t)return t=\"\"+t,\"<html>\"==t.substr(0,6)?this.html(t.substr(6)):(this.clear(),this._element.appendChild(window.document.createTextNode(t)),this);if(e=this._element,void 0!==t&&(e=t),n=\"\",e.childNodes)for(i=0;i<e.childNodes.length;i++)r=e.childNodes[i],3==r.nodeType?r.nodeValue&&(n+=r.nodeValue):n+=this.text(r);return n},html:function(t){return void 0===t?this._element.innerHTML:(this._element&&(this._element.innerHTML=t),this)},focus:function(){var t=this._element;return t?(\"function\"==typeof t.focus&&t.focus(),this):this},rect:function(){var t=this._element;if(!t)return null;\"function\"!=typeof t.getBoundingClientRect&&console.error(\"[wdg.rect] This element has non `getBoundingClientRect` function:\",t);var e=t.getBoundingClientRect();return void 0===e.width&&(e.width=e.right-e.left),void 0===e.height&&(e.height=e.bottom-e.top),e},Tap:function(t,e){if(void 0===t)return this._Tap;var n=this;return void 0===e&&(e=n),\"string\"==typeof t&&(t=e[t]),this._Tap||this.activatePointerEvents(),this._Tap=[t,e],this}},i.prototype.activatePointerEvents=function(){if(this._pointerEvents)return this;this._pointerEvents={start:0};var t=this._pointerEvents,e=this;return this.addEvent(\"touchstart\",function(e){e.preventDefault(),e.stopPropagation(),t.touch=1,t.start=Date.now()}),this.addEvent(\"touchend\",function(n){n.preventDefault(),n.stopPropagation();var i=e._Tap;if(i){t.touch=0;Date.now()-t.start<900&&i[0].call(i[1],n)}}),this.addEvent(\"mousedown\",function(e){e.preventDefault(),e.stopPropagation(),t.touch||(t.start=Date.now())}),this.addEvent(\"mouseup\",function(n){n.preventDefault(),n.stopPropagation();var i=e._Tap;if(i){Date.now()-t.start<900&&i[0].call(i[1],n)}}),this},i.prototype.div=function(){for(var t=new i,e=0;e<arguments.length;e++)t.addClass(arguments[e]);return t},i.prototype.tag=function(t){void 0===t&&(t=\"div\");for(var e=new i({tag:t}),n=1;n<arguments.length;n++)e.addClass(arguments[n]);return e},i.prototype.isInDOM=function(){return i.isInDOM(this.element())},i.prototype.onAppend=function(){},i.create=function(t){return new i(t)},i.find=function(t){return new i({element:window.document.querySelector(t)})},i.svg=function(t,e){\"object\"==typeof t&&(e=t,t=\"svg\"),\"string\"!=typeof t&&(t=\"svg\");var n=window.document.createElementNS(\"http://www.w3.org/2000/svg\",t),r=new i({element:n});return void 0===e&&(e={}),\"svg\"==t&&(void 0===e.version&&(e.version=\"1.1\"),void 0===e[\"xmlns:svg\"]&&(e[\"xmlns:svg\"]=\"http://www.w3.org/2000/svg\"),void 0===e.xmlns&&(e.xmlns=\"http://www.w3.org/2000/svg\"),void 0===e[\"xmlns:xlink\"]&&(e[\"xmlns:xlink\"]=\"http://www.w3.org/1999/xlink\"),void 0===e.viewBox&&\"number\"==typeof e.width&&\"number\"==typeof e.height&&(e.viewBox=\"0 0 \"+e.width+\" \"+e.height)),\"object\"==typeof e&&r.attr(e),r},i.isInDOM=function(t){return!!t&&(\"function\"==typeof t.element&&(t=t.element()),t===window.document||i.isInDOM(t.parentNode))},i.fromTextOrHtml=function(t){var e=i.span();return\"<html>\"==t.substr(0,6)?e.html(t.substr(6)):e.text(t),e},i.div=function(){for(var t=new i({tag:\"div\"}),e=0;e<arguments.length;e++)t.addClass(arguments[e]);return t},i.span=function(){for(var t=new i({tag:\"span\"}),e=0;e<arguments.length;e++)t.addClass(arguments[e]);return t},i.tag=function(t){void 0===t&&(t=\"div\");for(var e=new i({tag:t}),n=1;n<arguments.length;n++)e.addClass(arguments[n]);return e},i.id=function(t){return new i({element:window.document.getElementById(t)})},i.body=new i(window.document.body),e.exports=i,\"classList\"in window.document.createElement(\"_\")?function(){\"use strict\";var t=window.document.createElement(\"_\");if(t.classList.add(\"c1\",\"c2\"),!t.classList.contains(\"c2\")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;n<i;n++)t=arguments[n],e.call(this,t)}};e(\"add\"),e(\"remove\")}if(t.classList.toggle(\"c3\",!1),t.classList.contains(\"c3\")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():function(){\"use strict\";if(\"Element\"in window){var t=window.Element.prototype,e=Object,n=String.prototype.trim||function(){var t=new RegExp(\"^\\\\s+|\\\\s+$\",\"g\");return this.replace(t,\"\")},i=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},o=function(t,e){if(\"\"===e)throw new r(\"SYNTAX_ERR\",\"An invalid or illegal string was specified\");if(new RegExp(\"\\\\s\").test(e))throw new r(\"INVALID_CHARACTER_ERR\",\"String contains an invalid character\");return i.call(t,e)},s=function(t){for(var e=n.call(t.getAttribute(\"class\")||\"\"),i=e?e.split(new RegExp(\"\\\\s+\")):[],r=0,o=i.length;r<o;r++)this.push(i[r]);this._updateClassName=function(){t.setAttribute(\"class\",this.toString())}},a=s.prototype=[],l=function(){return new s(this)};if(r.prototype=Error.prototype,a.item=function(t){return this[t]||null},a.contains=function(t){return t+=\"\",-1!==o(this,t)},a.add=function(){var t,e=arguments,n=0,i=e.length,r=!1;do{t=e[n]+\"\",-1===o(this,t)&&(this.push(t),r=!0)}while(++n<i);r&&this._updateClassName()},a.remove=function(){var t,e,n=arguments,i=0,r=n.length,s=!1;do{for(t=n[i]+\"\",e=o(this,t);-1!==e;)this.splice(e,1),s=!0,e=o(this,t)}while(++i<r);s&&this._updateClassName()},a.toggle=function(t,e){t+=\"\";var n=this.contains(t),i=n?!0!==e&&\"remove\":!1!==e&&\"add\";return i&&this[i](t),!0===e||!1===e?e:!n},a.toString=function(){return this.join(\" \")},e.defineProperty){var u={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(t,\"classList\",u)}catch(n){-2146823252===n.number&&(u.enumerable=!1,e.defineProperty(t,\"classList\",u))}}else e.prototype.__defineGetter__&&t.__defineGetter__(\"classList\",l)}}(),e.exports._=r});\n//# sourceMappingURL=wdg.js.map","map":{"version":3,"file":"wdg.js","sources":["wdg.js"],"sourcesContent":["/** @module wdg */require( 'wdg', function(require, module, exports) { var _=function(){var D={\"en\":{},\"fr\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\n    'use strict';\n\n/**\n * Widgets inherit this class.\n */\nfunction Widget(options) {\n    this.__data = {};\n    try {\n        var e;\n        if (typeof options === 'undefined') options = {};\n        if (typeof options.innerHTML !== 'undefined' && typeof options.childNodes !== 'undefined') {\n            // On passe directement un élément.\n            options = {element: options};\n        }\n        if (typeof options.tag === 'undefined') options.tag = \"div\";\n        if (options.element) {\n            this.element(options.element);\n        } else if (typeof options.id !== 'undefined') {\n            e = window.document.getElementById(options.id);\n            if (!e) {\n                throw Error(\"Can't find element with id: \\\"\" + options.id + \"\\\"!\");\n            }\n            this.element(e);\n        } else {\n            this.element(window.document.createElement(options.tag));\n            this.addClass(\"wdg\", \"custom\");\n        }\n    }\n    catch (ex) {\n        console.error(\"[widget] \", ex);\n        console.error(\"[Widget] \", JSON.stringify(options));\n        throw Error(ex);\n    }\n}\n\nWidget.prototype = {\n    /**\n     * Accessor for attribute element\n     * @return element\n     */\n    element: function(v) {\n        if (v === undefined) return this._element;\n        if (typeof v === 'string') {\n            v = window.document.querySelector(v);\n        }\n        this._element = v;\n        return this;\n    },\n\n    data: function(k, v) {\n        if (typeof v === 'undefined') {\n            return this.__data[k];\n        }\n        this.__data[k] = v;\n        return this;\n    },\n\n    /**\n     * Remove this element from its parent.\n     * @memberof wdg\n     */\n    detach: function() {\n        var e = this._element;\n        if (e) {\n            var p = e.parentNode;\n            if (p) {\n                p.removeChild(e);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * @param name\n     * @memberof wdg\n     */\n    addEvent: function(name, slot, sender) {\n        if (typeof slot === 'string') {\n            var that = this, key = slot;\n            if (typeof sender === 'undefined') sender = this;\n            slot = function(x) {\n                var f = sender[key];\n                if (typeof f === 'function') {\n                    f.call(sender, x);\n                } else {\n                    throw Error(\"\\\"\" + slot + \"\\\" is not a function of: \" + sender);\n                }\n            };\n        }\n        var e = this.element();\n        if (name == 'tap') {\n            e.addEventListener(\n                \"mousedown\",\n                function(evt) {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                },\n                false\n            );\n            e.addEventListener(\n                \"mouseup\",\n                function(evt) {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                    slot(evt);\n                },\n                false\n            );\n            e.addEventListener(\"touchend\", slot, false);\n\n        } else {\n            e.addEventListener(name, slot, false);\n        }\n        return this;\n    },\n\n    /**\n     * Retire un attribut à l'élément sous-jacent.\n     * @example\n     * this.removeAttr(\"selected\");\n     * @memberof wdg\n     */\n    removeAttr: function() {\n        if (this._element) {\n            var i, arg;\n            for (i = 0 ; i < arguments.length ; i++) {\n                arg = arguments[i];\n                this._element.removeAttribute(arg);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * Teste l'existence d'un attribut dans l'élément sous-jacent.\n     * @memberof wdg\n     */\n    hasAttribute: function(key) {\n        if (!this._element) return false;\n        return this._element.hasAttribute(key);\n    },\n\n    /**\n     * Lit ou affecte la valeur d'un attribut de l'élément sous-jacent.\n     * @example\n     * // Le pseudo attribut '$' sert à insérer du texte.\n     * var div = new Widget();\n     * div.attr({$: 'Hello world!', title: 'Typical first sentence...'});\n     * @param key Nom de l'attribut ou dictionnaire des attributs.\n     * @param val [Facultatif] Valeur de l'attribut. Si elle est omise, la méthode retourne la valeur actuelle.\n     * @param ns [Facultatif] Namespace éventuel.\n     * @memberof wdg\n     */\n    attr: function(key, val, ns) {\n        var k;\n        if (!this._element || !this._element.getAttribute) return null;\n        if (typeof key == \"string\") {\n            if (val !== undefined) {\n                if (key == \"class\") {\n                    this._element.className = val;\n                    return this;\n                }\n                if (ns && this._element.setAttributeNS) {\n                    this._element.setAttributeNS(ns, key, val);\n                }\n                else {\n                    this._element.setAttribute(key, val);\n                }\n                return this;\n            }\n            return this._element.getAttribute(key);\n        }\n        if (typeof key == \"object\") {\n            for (k in key) {\n                if (k == \"class\") {\n                    this._element.className = key[k];\n                } else if (k == \"$\") {\n                    this.text(key[k]);\n                } else {\n                    this._element.setAttribute(k, key[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n\n    /**\n     * Permet de changer le style de l'élément sous-jacent.\n     * @example\n     * this.css(\"color\", \"red\");\n     * alert(this.css(\"display\"));\n     * this.css(\n     *   {\n     *     margin: \"0px\",\n     *     padding: \"3px\",\n     *     border: \"1px solid black\"\n     *   }\n     * );\n     * @param key Nom du champ de style ou dictionnaire clefs/valeurs.\n     * @param val  Valeur du champ key.  S'il est omis et  que \"key\"\n     * est  de type  string,  alors la  méthode  retourne la  valeur\n     * actuelle.\n     * @memberof wdg\n     */\n    css: function(key, val) {\n        var k, e = this._element;\n        if (!e) return null;\n        if (typeof e.style !== 'object') {\n            console.error(\"[wdg.css] This element does not support styles!\", e);\n            e.style = {};\n        }\n        if (typeof key == 'string') {\n            if (val) {\n                e.style[key] = val;\n                return this;\n            }\n            return e.style[key];\n        }\n        if (typeof key == 'object') {\n            for (k in key) {\n                try {\n                    e.style[k] = key[k];\n                } catch (x) {\n                    console.error(\"[wdg.css] Bad CSS attribute \" + k + \": \" + key[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n    insertAfter: function(target) {\n        if (typeof target.element === 'function') {\n            target = target.element();\n        }\n        target.parentNode.insertBefore(this.element(), target.nextSibling);\n        return this;\n    },\n\n    insertBefore: function(target) {\n        if (typeof target.element === 'function') {\n            target = target.element();\n        }\n        target.parentNode.insertBefore(this.element(), target);\n        return this;\n    },\n\n    /**\n     * Append children to this widget.\n     */\n    append: function() {\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (typeof arg === 'number') arg = \"\" + arg;\n            if (typeof arg === 'undefined' || typeof arg === 'null'\n                || (typeof arg !== 'object' && typeof arg !== 'string')) {\n                console.error(\"[Widget.append] Argument #\" + i + \" is invalid!\", arguments);\n                console.error(\"[Widget.append] Is type is: \" + (typeof arg));\n                continue;\n            };\n            if (typeof arg === 'string') {\n                if (arg.length < 1) arg = \" \";\n                arg = window.document.createTextNode(arg);\n                if (!arg) {\n                    console.error(\n                        \"[Widget.append] Unable to create a text node with this text: \", arg\n                    );\n                    console.error(\"[wdg] arguments=...\", arguments);\n                    throw Error(\n                        \"[Widget.append] Unable to create a text node with this text: \"\n                            + JSON.stringify(arg)\n                    );\n                }\n            }\n            if (Array.isArray(arg)) {\n                arg.forEach(\n                    function(item) {\n                        this.append(item);\n                    }, this\n                );\n            } else {\n                var e = arg;\n                if( typeof e.element === 'function' ) e = e.element();\n                else if( e.element ) e = e.element;\n                this._element.appendChild(e);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * Append this widget to a parent.\n     * @param parent\n     * @memberof wdg\n     */\n    appendTo: function(parent) {\n        if (!parent) return this;\n        if (typeof parent.append === 'function') {\n            parent.append(this);\n        } else if (typeof parent.appendChild === 'function') {\n            parent.appendChild(this._element);\n            this.onAppend();\n        }\n        return this;\n    },\n\n    /**\n     * Append this widget to BODY.\n     * @memberof wdg\n     */\n    appendToBody: function() {\n        window.document.body.appendChild(this._element);\n        return this;\n    },\n\n    hasClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (!e.contains(arg)) return false;\n        }\n        return true;\n    },\n\n    /**\n     * Add CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    addClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (typeof arg === 'string') {\n                arg = arg.trim();\n                if (arg.length > 0) e.add(arg);\n            } else {\n                console.error(\"[wdg.addClass] Arguments with bad type!\", arguments);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * Remove CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    removeClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            e.remove(arg);\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Toggle CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    toggleClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            e.toggle(arg);\n        }\n        return this;\n    },\n\n    /**\n     * Remove all children of this widget.\n     * Any argument passed will be appended to this widget.\n     * @memberof wdg\n     */\n    clear: function() {\n        // (!) On préfère retirer les éléments un par un du DOM plutôt que d'utiliser simplement\n        // this.html(\"\").\n        // En effet, le code simplifié a des conséquences inattendues dans IE9 et IE10 au moins.\n        // Le bug des markers qui disparaissaients sur les cartes de Trail-Passion 4 a été corrigé\n        // avec cette modification.\n        var e = this.element();\n        while(e.firstChild){\n            e.removeChild(e.firstChild);\n        }\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            this.append(arg);\n        }\n\n        return this;\n    },\n\n    /**\n     * 1) Sans argument, cette  fonction retourne le texte contenu\n     * dans ce widget.\n     * 2) Avec  un texte en  argument, cette fonction  retire tous\n     * les  enfants de  ce widget  et  les remplace  par un  noeud\n     * texte.\n     * 3)  Avec un  élément  du DOM  en  argument, cette  fonction\n     * retourne le texte contenu par ce dernier.\n     * @memberof tfw.Widget\n     */\n    text: function(arg) {\n        var e, text, i, child;\n        if (typeof arg == 'string' || typeof arg == 'number') {\n            arg = '' + arg;\n            if (arg.substr(0, 6) == '<html>') return this.html( arg.substr( 6 ) );\n            \n            this.clear();\n            this._element.appendChild(window.document.createTextNode(arg));\n            return this;\n        } else {\n            // On retourne le contenu textuel de ce widget.\n            e = this._element;\n            if (arg !== undefined) {\n                // On peut passer un élément du DOM pour en extraire son contenu textuel.\n                e = arg;\n            }\n            text = \"\";\n            if (e.childNodes) {\n                for (i=0 ; i<e.childNodes.length ; i++) {\n                    child = e.childNodes[i];\n                    if (child.nodeType == 3) {\n                        if (child.nodeValue) {\n                            text += child.nodeValue;\n                        }\n                    } else {\n                        text += this.text( child );\n                    }\n                }\n            }\n            return text;\n        }\n    },\n\n    /**\n     *\n     * @param html\n     * @memberof wdg\n     */\n    html: function(html) {\n        if (typeof html === 'undefined') return this._element.innerHTML;\n        if (this._element) this._element.innerHTML = html;\n        return this;\n    },\n\n    /**\n     * If applicable, give focus to this element.\n     * @memberof wdg\n     */\n    focus: function() {\n        var e = this._element;\n        if (!e) return this;\n        if (typeof e.focus === 'function') {\n            e.focus();\n        }\n        return this;\n    },\n\n    /**\n     * Returns the bounds of the underlying element.\n     * @memberof wdg\n     */\n    rect: function() {\n        var e = this._element;\n        if (!e) return null;\n        if (typeof e.getBoundingClientRect !== 'function') {\n            console.error(\"[wdg.rect] This element has non `getBoundingClientRect` function:\", e);\n        }\n        var r = e.getBoundingClientRect();\n        if( typeof r.width === 'undefined' ) r.width = r.right - r.left;\n        if( typeof r.height === 'undefined' ) r.height = r.bottom - r.top;\n        return r;\n    },\n\n    /**\n     *\n     * @param\n     * @memberof wdg\n     */\n    Tap: function(slot, sender) {\n        if (typeof slot === 'undefined') return this._Tap;\n        var that = this;\n        if (typeof sender === 'undefined') sender = that;\n        if (typeof slot === 'string') slot = sender[slot];\n        if (!this._Tap) {\n            this.activatePointerEvents();\n        }\n        this._Tap = [slot, sender];\n        return this;\n    }\n};\n\n/**\n * @return void\n */\nWidget.prototype.activatePointerEvents = function() {\n    if (this._pointerEvents) return this;\n    this._pointerEvents = {start: 0};\n\n    /*\n     interact(this.element()).on(\"tap\", function(evt) {\n     var slot = that._Tap;\n     if (slot) {\n     slot[0].call(slot[1], {x: evt.x, y: evt.y});\n     }\n     });\n     return this;\n     */\n    var pe = this._pointerEvents;\n    var that = this;\n    this.addEvent(\n        \"touchstart\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            pe.touch = 1;\n            pe.start = Date.now();\n        }\n    );\n    this.addEvent(\n        \"touchend\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            var tap = that._Tap;\n            if (!tap) return;\n            pe.touch = 0;\n            var delta = Date.now() - pe.start;\n            if (delta < 900) {\n                tap[0].call(tap[1], evt);\n            }\n        }\n    );\n    this.addEvent(\n        \"mousedown\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            if (pe.touch) return;\n            pe.start = Date.now();\n        }\n    );\n    this.addEvent(\n        \"mouseup\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            var tap = that._Tap;\n            if (!tap) return;\n            var delta = Date.now() - pe.start;\n            if (delta < 900) {\n                tap[0].call(tap[1], evt);\n            }\n        }\n    );\n\n    return this;\n};\n\n/**\n * @return void\n */\nWidget.prototype.div = function() {\n    var div = new Widget();\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.prototype.tag = function(tag) {\n    if (typeof tag === 'undefined') tag = 'div';\n    var div = new Widget({tag: tag});\n    for (var i = 1 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\n/**\n * @return void\n */\nWidget.prototype.isInDOM = function() {\n    return Widget.isInDOM(this.element());\n};\n\n/**\n * Fonction à surcharger  si on veut réagir lors de  l'insertion dans le\n * DOM.\n */\nWidget.prototype.onAppend = function() {};\n\nWidget.create = function(args) {\n    return new Widget(args);\n};\n\nWidget.find = function(query) {\n    return new Widget({element: window.document.querySelector(query)});\n};\n\n\n/**\n * Create a SVG élément with attributes.\n */\nWidget.svg = function(tag, attribs) {\n    var namespace = \"http://www.w3.org/2000/svg\";\n    if (typeof tag === 'object') {\n        attribs = tag;\n        tag = \"svg\";\n    }\n    if (typeof tag !== 'string') tag = 'svg';\n    var e = window.document.createElementNS(namespace, tag);\n    var w = new Widget({element: e});\n    if (typeof attribs === 'undefined') attribs = {};\n    if (tag == 'svg') {\n        if (typeof attribs.version === 'undefined') attribs.version = \"1.1\";\n        if (typeof attribs['xmlns:svg'] === 'undefined') {\n            attribs['xmlns:svg'] = 'http://www.w3.org/2000/svg';\n        }\n        if (typeof attribs['xmlns'] === 'undefined') {\n            attribs['xmlns'] = 'http://www.w3.org/2000/svg';\n        }\n        if (typeof attribs['xmlns:xlink'] === 'undefined') {\n            attribs['xmlns:xlink'] = 'http://www.w3.org/1999/xlink';\n        }\n        if (typeof attribs.viewBox === 'undefined'\n            && typeof attribs.width === 'number'\n            && typeof attribs.height === 'number')\n        {\n            attribs.viewBox = \"0 0 \" + attribs.width + \" \" + attribs.height;\n        }\n    }\n    if (typeof attribs === 'object') {\n        w.attr(attribs);\n    }\n    return w;\n};\n\n/**\n * Tester si le widget ou élément est actuellement attaché au DOM.\n */\nWidget.isInDOM = function(e) {\n    if (!e) return false;\n    if (typeof e.element === 'function') {\n        e = e.element();\n    }\n    if (e === window.document) return true;\n    return Widget.isInDOM(e.parentNode);\n};\n\n/**\n * Create a `span` with a text or an HTML content.\n * If `txt` starts with `<html>`, we set an HTML content.\n */\nWidget.fromTextOrHtml = function(txt) {\n    var e = Widget.span();\n    if (txt.substr(0, 6) == '<html>') {\n        e.html(txt.substr(6));\n    } else {\n        e.text(txt);\n    }\n    return e;\n};\n\n/**\n * Create a DIV and apply all arguments as classes to it.\n */\nWidget.div = function() {\n    var div = new Widget({tag: \"div\"});\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\n/**\n * Create a SPAN and apply all arguments as classes to it.\n */\nWidget.span = function() {\n    var div = new Widget({tag: \"span\"});\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.tag = function(tag) {\n    if (typeof tag === 'undefined') tag = 'div';\n    var div = new Widget({tag: tag});\n    for (var i = 1 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.id = function(id) {\n    return new Widget({element: window.document.getElementById(id)});\n};\n\n/**\n * Widget defining the `document.body` element.\n */\nWidget.body = new Widget(window.document.body);\n\nmodule.exports = Widget;\n\n\n\n/*\n * classList.js: Cross-browser full element.classList implementation.\n * 2014-07-23\n *\n * http://purl.eligrey.com/github/classList.js/blob/master/classList.js\n *\n * By Eli Grey, http://eligrey.com\n * Public Domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\n// Full polyfill for browsers with no classList support\nif (!(\"classList\" in window.document.createElement(\"_\"))) {\n    (function () {\n        \"use strict\";\n\n        if (!('Element' in window)) return;\n\n        var classListProp = \"classList\";\n        var protoProp = \"prototype\";\n        var elemCtrProto = window.Element[protoProp];\n        var objCtr = Object;\n        var strTrim = String.prototype.trim || function () {\n            var rx = new RegExp(\"^\\\\s+|\\\\s+$\", \"g\");\n            return this.replace(rx, '');\n        };\n        var arrIndexOf = Array[protoProp].indexOf || function (item) {\n            var\n            i = 0\n            , len = this.length\n            ;\n            for (; i < len; i++) {\n                if (i in this && this[i] === item) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n        // Vendors: please allow content code to instantiate DOMExceptions\n        , DOMEx = function (type, message) {\n            this.name = type;\n            this.code = DOMException[type];\n            this.message = message;\n        }\n        , checkTokenAndGetIndex = function (classList, token) {\n            if (token === \"\") {\n                throw new DOMEx(\n                    \"SYNTAX_ERR\"\n                    , \"An invalid or illegal string was specified\"\n                );\n            }\n            if ((new RegExp(\"\\\\s\")).test(token)) {\n                throw new DOMEx(\n                    \"INVALID_CHARACTER_ERR\"\n                    , \"String contains an invalid character\"\n                );\n            }\n            return arrIndexOf.call(classList, token);\n        }\n        , ClassList = function (elem) {\n            var\n            trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n            , classes = trimmedClasses ? trimmedClasses.split(new RegExp(\"\\\\s+\")) : []\n            , i = 0\n            , len = classes.length\n            ;\n            for (; i < len; i++) {\n                this.push(classes[i]);\n            }\n            this._updateClassName = function () {\n                elem.setAttribute(\"class\", this.toString());\n            };\n        }\n        , classListProto = ClassList[protoProp] = []\n        , classListGetter = function () {\n            return new ClassList(this);\n        }\n        ;\n\n        // Most DOMException implementations don't allow calling DOMException's toString()\n        // on non-DOMExceptions. Error's toString() is sufficient here.\n        DOMEx[protoProp] = Error[protoProp];\n        classListProto.item = function (i) {\n            return this[i] || null;\n        };\n        classListProto.contains = function (token) {\n            token += \"\";\n            return checkTokenAndGetIndex(this, token) !== -1;\n        };\n        classListProto.add = function () {\n            var\n            tokens = arguments\n            , i = 0\n            , l = tokens.length\n            , token\n            , updated = false\n            ;\n            do {\n                token = tokens[i] + \"\";\n                if (checkTokenAndGetIndex(this, token) === -1) {\n                    this.push(token);\n                    updated = true;\n                }\n            }\n            while (++i < l);\n\n            if (updated) {\n                this._updateClassName();\n            }\n        };\n        classListProto.remove = function () {\n            var\n            tokens = arguments\n            , i = 0\n            , l = tokens.length\n            , token\n            , updated = false\n            , index\n            ;\n            do {\n                token = tokens[i] + \"\";\n                index = checkTokenAndGetIndex(this, token);\n                while (index !== -1) {\n                    this.splice(index, 1);\n                    updated = true;\n                    index = checkTokenAndGetIndex(this, token);\n                }\n            }\n            while (++i < l);\n\n            if (updated) {\n                this._updateClassName();\n            }\n        };\n        classListProto.toggle = function (token, force) {\n            token += \"\";\n\n            var\n            result = this.contains(token)\n            , method = result ?\n                force !== true && \"remove\"\n                :\n                force !== false && \"add\"\n            ;\n\n            if (method) {\n                this[method](token);\n            }\n\n            if (force === true || force === false) {\n                return force;\n            } else {\n                return !result;\n            }\n        };\n        classListProto.toString = function () {\n            return this.join(\" \");\n        };\n\n        if (objCtr.defineProperty) {\n            var classListPropDesc = {\n                get: classListGetter, enumerable: true, configurable: true\n            };\n            try {\n                objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n            } catch (ex) { // IE 8 doesn't support enumerable:true\n                if (ex.number === -0x7FF5EC54) {\n                    classListPropDesc.enumerable = false;\n                    objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n                }\n            }\n        } else if (objCtr[protoProp].__defineGetter__) {\n            elemCtrProto.__defineGetter__(classListProp, classListGetter);\n        }\n    }());\n} else {\n    // There is full or partial native classList support, so just check if we need\n    // to normalize the add/remove and toggle APIs.\n    (function () {\n        \"use strict\";\n\n        var testElement = window.document.createElement(\"_\");\n\n        testElement.classList.add(\"c1\", \"c2\");\n\n        // Polyfill for IE 10/11 and Firefox <26, where classList.add and\n        // classList.remove exist but support only one argument at a time.\n        if (!testElement.classList.contains(\"c2\")) {\n            var createMethod = function(method) {\n                var original = DOMTokenList.prototype[method];\n\n                DOMTokenList.prototype[method] = function(token) {\n                    var i, len = arguments.length;\n\n                    for (i = 0; i < len; i++) {\n                        token = arguments[i];\n                        original.call(this, token);\n                    }\n                };\n            };\n            createMethod('add');\n            createMethod('remove');\n        }\n\n        testElement.classList.toggle(\"c3\", false);\n\n        // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n        // support the second argument.\n        if (testElement.classList.contains(\"c3\")) {\n            var _toggle = DOMTokenList.prototype.toggle;\n\n            DOMTokenList.prototype.toggle = function(token, force) {\n                if (1 in arguments && !this.contains(token) === !force) {\n                    return force;\n                } else {\n                    return _toggle.call(this, token);\n                }\n            };\n\n        }\n        testElement = null;\n    }());\n}\n\n\n  \nmodule.exports._ = _;\n});"],"names":["require","module","exports","Widget","options","this","__data","e","innerHTML","childNodes","element","tag","id","window","document","getElementById","Error","createElement","addClass","ex","console","error","JSON","stringify","_","X","D","arguments","en","fr","intl","all","prototype","v","undefined","_element","querySelector","data","k","detach","p","parentNode","removeChild","addEvent","name","slot","sender","key","x","f","call","addEventListener","evt","preventDefault","stopPropagation","removeAttr","i","arg","length","removeAttribute","hasAttribute","attr","val","ns","getAttribute","className","setAttributeNS","setAttribute","text","css","style","insertAfter","target","insertBefore","nextSibling","append","createTextNode","Array","isArray","forEach","item","appendChild","appendTo","parent","onAppend","appendToBody","body","hasClass","classList","contains","trim","add","removeClass","remove","toggleClass","toggle","clear","firstChild","child","substr","html","nodeType","nodeValue","focus","rect","getBoundingClientRect","r","width","right","left","height","bottom","top","Tap","_Tap","that","activatePointerEvents","_pointerEvents","start","pe","touch","Date","now","tap","div","isInDOM","create","args","find","query","svg","attribs","createElementNS","w","version","viewBox","fromTextOrHtml","txt","span","testElement","createMethod","method","original","DOMTokenList","token","len","_toggle","force","elemCtrProto","Element","objCtr","Object","strTrim","String","rx","RegExp","replace","arrIndexOf","indexOf","DOMEx","type","message","code","DOMException","checkTokenAndGetIndex","test","ClassList","elem","trimmedClasses","classes","split","push","_updateClassName","toString","classListProto","classListGetter","tokens","l","updated","index","splice","result","join","defineProperty","classListPropDesc","get","enumerable","configurable","number","__defineGetter__"],"mappings":"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"},"dependencies":["mod/$"]}