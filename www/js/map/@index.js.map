{"version":3,"file":"@index.js.map","sources":["@index.js","$.js","raygl.main.js","webgl.plane.js","wdg.js"],"sourcesContent":["var require = function() {\r\n    var modules = {};\r\n    \r\n    return function(id, body) {\r\n        var mod;\r\n        body = window[\"#\" + id];\r\n        if (typeof body === 'undefined') {\r\n            var err = new Error(\"Required module is missing: \" + id);   \r\n            console.error(err.stack);\r\n            throw err;\r\n        }\r\n        mod = modules[id];\r\n        if (typeof mod === 'undefined') {\r\n            mod = {exports: {}};\r\n            var exports = mod.exports;\r\n            body(exports, mod);\r\n            modules[id] = mod.exports;\r\n            mod = mod.exports;\r\n            //console.log(\"Module initialized: \" + id);\r\n        }\r\n        return mod;\r\n    };\r\n}();\r\nfunction addListener(e,l) {\r\n    if (window.addEventListener) {\r\n        window.addEventListener(e,l,false);\r\n    } else {\r\n        window.attachEvent('on' + e, l);\r\n    }\r\n};\r\n\r\naddListener(\r\n    'DOMContentLoaded',\r\n    function() {\r\n        document.body.parentNode.$data = {};\r\n        // Attach controllers.\r\n        APP = require('raygl.main');\nsetTimeout(function (){if(typeof APP.start==='function')APP.start()});\r\n    }\r\n);\r\n","window['#$']=function(exports,module){  exports.config={\n    name:\"demo-raytracing-shader\",\n    description:\"How to fly among hundreds of 3d spheres drawn on a 3D single face with shader.\",\n    author:\"Tolokoban\",\n    version:\"0.0.341\",\n    major:0,\n    minor:0,\n    revision:341,\n    date:new Date(2016,0,14,15,42,44)\n};\nvar currentLang = null;\r\nexports.lang = function(lang) {\r\n    if (lang === undefined) {\r\n        lang = window.localStorage.getItem(\"Language\");\r\n        if (!lang) {\r\n            lang = window.navigator.language;\r\n            if (!lang) {\r\n                lang = window.navigator.browserLanguage;\r\n                if (!lang) {\r\n                    lang = \"fr\";\r\n                }\r\n            }\r\n        }\r\n        lang = lang.substr(0, 2).toLowerCase();\r\n    }\r\n    currentLang = lang;\r\n    window.localStorage.setItem(\"Language\", lang);\r\n    return lang;\r\n};\r\nexports.intl = function(words, params) {\r\n    var dic = words[exports.lang()],\r\n    k = params[0],\r\n    txt, newTxt, i, c, lastIdx, pos;\r\n    if (!dic) {\r\n        console.error(\"Missing internationalization for language : \\\"\" + exports.lang() + \"\\\"!\");\r\n        return k;\r\n    }\r\n    txt = dic[k];\r\n    if (!txt) {\r\n        console.error(\"Missing internationalization [\"\r\n                      + exports.lang()\r\n                      + \"]: \\\"\" + k + \"\\\"!\");\r\n        return k;\r\n    }\r\n    if (params.length > 1) {\r\n        newTxt = \"\";\r\n        lastIdx = 0;\r\n        for (i = 0 ; i < txt.length ; i++) {\r\n            c = txt.charAt(i);\r\n            if (c === '$') {\r\n                newTxt += txt.substring(lastIdx, i);\r\n                i++;\r\n                pos = txt.charCodeAt(i) - 48;\r\n                if (pos < 0 || pos >= params.length) {\r\n                    newTxt += \"$\" + txt.charAt(i);\r\n                } else {\r\n                    newTxt += params[pos];\r\n                }\r\n                lastIdx = i + 1;\r\n            } else if (c === '\\\\') {\r\n                newTxt += txt.substring(lastIdx, i);\r\n                i++;\r\n                newTxt += txt.charAt(i);\r\n                lastIdx = i + 1;\r\n            }\r\n        }\r\n        newTxt += txt.substr(lastIdx);\r\n        txt = newTxt;\r\n    }\r\n    return txt;\r\n};\r\n }\r\n","window['#raygl.main']=function(exports,module){  var Plane = require(\"webgl.plane\");\r\n\r\nvar texture = {\r\n    colors: {\r\n        data: [],\r\n        width: 2048\r\n    }\r\n};\r\n\r\nwindow.res = function(res) {\r\n    window.localStorage.setItem(\"res\", res);\r\n    window.location.reload();\r\n};\r\n\r\n// Deal with resolution.\r\nvar res = window.localStorage.getItem(\"res\");\r\nif (res == null) res = 1;\r\nres = parseInt(res);\r\nif (isNaN(res)) res = 1;\r\ndocument.getElementById(\"res1\").removeAttribute(\"disabled\");\r\ndocument.getElementById(\"res2\").removeAttribute(\"disabled\");\r\ndocument.getElementById(\"res4\").removeAttribute(\"disabled\");\r\ndocument.getElementById(\"res\" + res).setAttribute(\"disabled\", \"true\");\r\n\r\n\r\nfor (var j=0 ; j < texture.colors.width; j++) {\r\n    var rr = Math.floor(256 * Math.random());\r\n    var gg = Math.floor(256 * Math.random());\r\n    var bb = Math.floor(256 * Math.random());\r\n    //rr = gg = bb = 60;\r\n    texture.colors.data.push(rr);\r\n    texture.colors.data.push(gg);\r\n    texture.colors.data.push(bb);\r\n    texture.colors.data.push(127 * (1 + Math.cos(Math.PI * 2 * j / texture.colors.width)));\r\n}\r\n\r\nvar plane = new Plane(\r\n    {\r\n        texture: texture,\r\n        render: function(time, uniform) {\r\n            uniform.X = time * .013;\r\n            uniform.Y = time * .019;\r\n            uniform.Z = time * .070;\r\n            uniform.time = time;\r\n        },\r\n        resolution: res\r\n    }\r\n);\r\nplane.start();\r\n }\r\n","window['#webgl.plane']=function(exports,module){  \"use strict\";\r\nvar Widget = require(\"wdg\");\r\n\r\n/**\r\n * @example\r\n * var Plane = require(\"webgl.plane\");\r\n * var instance = new Plane();\r\n * @class Plane\r\n */\r\nvar Plane = function(args) {\r\n  if (typeof args === 'undefined') args = {};\r\n  if (typeof args.canvasId === 'undefined') args.canvasId = \"glcanvas\";\r\n  if (typeof args.fragmentShaderId === 'undefined') args.fragmentShaderId = \"fragment-shader\";\r\n  if (typeof args.uniform === 'undefined') args.uniform = {};\r\n  if (typeof args.texture === 'undefined') args.texture = {};\r\n  if (typeof args.resolution === 'undefined') args.resolution = 2;\r\n\r\n  this._args = args;\r\n\r\n  var canvasId = args.canvasId;\r\n  var canvas = document.getElementById(canvasId);\r\n  if (!canvas) {\r\n    throw Error(\"Canvas not found with this id: \" + canvasId);\r\n  }\r\n  var fragmentShaderId = args.fragmentShaderId;\r\n  var fragmentShaderElement = document.getElementById(fragmentShaderId);\r\n  if (!fragmentShaderElement) {\r\n    throw Error(\"Fragment shader not found with this id: \" + canvasId);\r\n  }\r\n  var fragmentShader = fragmentShaderElement.textContent.trim();\r\n  var rect = canvas.getBoundingClientRect();\r\n  var W = rect.width;\r\n  var H = rect.height;\r\n  canvas.setAttribute(\"width\", W / args.resolution);\r\n  canvas.setAttribute(\"height\", H / args.resolution);\r\n  var gl = canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\");\r\n\r\n  initShaders.call(this, gl, fragmentShader);\r\n  this._squareVerticesBuffer = initBuffers(gl, W / args.resolution, H / args.resolution);\r\n\r\n  var key, val, texture, textureIndex = 0;\r\n  for (key in args.texture) {\r\n    val = args.texture[key];\r\n    if (typeof val.data === 'undefined') {\r\n      throw Error(\"Missing texture attribute \\\"data\\\" for \\\"\" + key + \"\\\"!\");\r\n    }\r\n    if (typeof val.width === 'undefined') {\r\n      throw Error(\"Missing texture attribute \\\"width\\\" for \\\"\" + key + \"\\\"!\");\r\n    }\r\n\r\n    if (!Array.isArray(val.data)) {\r\n      throw Error(\"Textures must be arrays of Uint8! It is not the case of \\\"\" + key + \"\\\"!\");\r\n    }\r\n    // Make sur data is an array of UNSIGNED_BYTE.\r\n    val.data = new Uint8Array(val.data);\r\n    var tex = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, tex);\r\n    var width = val.width;\r\n    var height = Math.floor((val.data.length >> 2) / width);\r\n    gl.texImage2D(\r\n      gl.TEXTURE_2D,     // target\r\n      0,                 // level\r\n      gl.RGBA,           // internal format\r\n      width, height,     // width, height\r\n      0,                 // border\r\n      gl.RGBA,           // format\r\n      gl.UNSIGNED_BYTE,  // type\r\n      val.data           // data\r\n    );\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\r\n    gl.generateMipmap(gl.TEXTURE_2D);\r\n    var location = gl.getUniformLocation(this._shaderProgram, key);\r\n    gl.activeTexture(gl.TEXTURE0 + textureIndex);\r\n    gl.bindTexture(gl.TEXTURE_2D, tex);\r\n    gl.uniform1i(location, textureIndex);\r\n    textureIndex++;\r\n  }\r\n\r\n  this._gl = gl;\r\n  this._started = false;\r\n};\r\n\r\n\r\n/**\r\n * @return void\r\n */\r\nPlane.prototype.start = function() {\r\n  var that = this;\r\n  var gl = this._gl;\r\n  var uniform = this._args.uniform;\r\n  this._started = true;\r\n\r\n  function render(time) {\r\n    //gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, that._squareVerticesBuffer);\r\n    gl.vertexAttribPointer(that._vertexPositionAttribute, 3, gl.FLOAT, false, 0, 0);\r\n\r\n    var f = that._args.render;\r\n    if (typeof f === 'function') {\r\n      f(time, uniform);\r\n    }\r\n\r\n    var key, val;\r\n    for (key in uniform) {\r\n      val = uniform[key];\r\n      gl.uniform1f(gl.getUniformLocation(that._shaderProgram, key), val);\r\n    }\r\n    // Draw the square.\r\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n    if (that._started) {\r\n      window.requestAnimationFrame(render);\r\n    }\r\n  }\r\n\r\n  window.requestAnimationFrame(render);\r\n};\r\n\r\n\r\nfunction initShaders(gl, code) {\r\n  //  var fragmentShader = getShader(gl, code);\r\n  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n  gl.shaderSource(fragmentShader, code);\r\n  gl.compileShader(fragmentShader);\r\n  if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\r\n    throw Error(\r\n      \"An error occurred compiling the fragment shaders:\\n\"\r\n        + gl.getShaderInfoLog(fragmentShader));\r\n  }\r\n\r\n  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n  gl.shaderSource(vertexShader, \"attribute vec3 aVertexPosition;\\nvarying lowp vec3 vPoint;\\nvoid main(void) {\\n  float x = aVertexPosition[0];\\n  float y = aVertexPosition[1];\\n  if (x > 0.0) {\\n    if (y > 0.0) {\\n      gl_Position = vec4(1.0, 1.0, 0.0, 1.0);\\n    } else {\\n      gl_Position = vec4(1.0, -1.0, 0.0, 1.0);\\n    }\\n  } else {\\n    if (y > 0.0) {\\n      gl_Position = vec4(-1.0, 1.0, 0.0, 1.0);\\n    } else {\\n      gl_Position = vec4(-1.0, -1.0, 0.0, 1.0);\\n    }\\n  }\\n  vPoint = aVertexPosition;\\n}\\n\");\r\n  gl.compileShader(vertexShader);\r\n  if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\r\n    throw Error(\r\n      \"An error occurred compiling the vertex shaders:\\n\"\r\n        + gl.getShaderInfoLog(vertexShader));\r\n  }\r\n\r\n  var shaderProgram = gl.createProgram();\r\n  gl.attachShader(shaderProgram, vertexShader);\r\n  gl.attachShader(shaderProgram, fragmentShader);\r\n  gl.linkProgram(shaderProgram);\r\n\r\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\r\n    throw Error(\"Unable to initialize the shader program.\");\r\n  }\r\n\r\n  gl.useProgram(shaderProgram);\r\n\r\n  var vertexPositionAttribute = gl.getAttribLocation(shaderProgram, \"aVertexPosition\");\r\n  gl.enableVertexAttribArray(vertexPositionAttribute);\r\n\r\n  this._shaderProgram = shaderProgram;\r\n  this._vertexPositionAttribute = vertexPositionAttribute;\r\n}\r\n\r\nfunction initBuffers(gl, W, H) {\r\n  var squareVerticesBuffer = gl.createBuffer();\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, squareVerticesBuffer);\r\n  var vertices = [\r\n    W/2,  -H/2,  0.0,\r\n      -W/2, -H/2,  0.0,\r\n    W/2,  H/2, 0.0,\r\n      -W/2, H/2, 0.0\r\n  ];\r\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\r\n  return squareVerticesBuffer;\r\n}\r\n\r\nmodule.exports = Plane;\r\n }\r\n","window['#wdg']=function(exports,module){  'use strict';\r\n\r\n/**\r\n * Widgets inherit this class.\r\n */\r\nfunction Widget(options) {\r\n    this.__data = {};\r\n    try {\r\n        var e;\r\n        if (typeof options === 'undefined') options = {};\r\n        if (typeof options.innerHTML !== 'undefined' && typeof options.childNodes !== 'undefined') {\r\n            // On passe directement un élément.\r\n            options = {element: options};\r\n        }\r\n        if (typeof options.tag === 'undefined') options.tag = \"div\";\r\n        if (options.element) {\r\n            this.element(options.element);\r\n        } else if (typeof options.id !== 'undefined') {\r\n            e = window.document.getElementById(options.id);\r\n            if (!e) {\r\n                throw Error(\"Can't find element with id: \\\"\" + options.id + \"\\\"!\");\r\n            }\r\n            this.element(e);\r\n        } else {\r\n            this.element(window.document.createElement(options.tag));\r\n            this.addClass(\"wdg\", \"custom\");\r\n        }\r\n    }\r\n    catch (ex) {\r\n        console.error(\"[widget] \", ex);\r\n        console.error(\"[Widget] \", JSON.stringify(options));\r\n        throw Error(ex);\r\n    }\r\n}\r\n\r\nWidget.prototype = {\r\n    /**\r\n     * Accessor for attribute element\r\n     * @return element\r\n     */\r\n    element: function(v) {\r\n        if (v === undefined) return this._element;\r\n        if (typeof v === 'string') {\r\n            v = window.document.querySelector(v);\r\n        }\r\n        this._element = v;\r\n        return this;\r\n    },\r\n\r\n    data: function(k, v) {\r\n        if (typeof v === 'undefined') {\r\n            return this.__data[k];\r\n        }\r\n        this.__data[k] = v;\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Remove this element from its parent.\r\n     * @memberof wdg\r\n     */\r\n    detach: function() {\r\n        var e = this._element;\r\n        if (e) {\r\n            var p = e.parentNode;\r\n            if (p) {\r\n                p.removeChild(e);\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     *\r\n     * @param name\r\n     * @memberof wdg\r\n     */\r\n    addEvent: function(name, slot, sender) {\r\n        if (typeof slot === 'string') {\r\n            var that = this, key = slot;\r\n            if (typeof sender === 'undefined') sender = this;\r\n            slot = function(x) {\r\n                var f = sender[key];\r\n                if (typeof f === 'function') {\r\n                    f.call(sender, x);\r\n                } else {\r\n                    throw Error(\"\\\"\" + slot + \"\\\" is not a function of: \" + sender);\r\n                }\r\n            };\r\n        }\r\n        var e = this.element();\r\n        if (name == 'tap') {\r\n            e.addEventListener(\r\n                \"mousedown\",\r\n                function(evt) {\r\n                    evt.preventDefault();\r\n                    evt.stopPropagation();\r\n                },\r\n                false\r\n            );\r\n            e.addEventListener(\r\n                \"mouseup\",\r\n                function(evt) {\r\n                    evt.preventDefault();\r\n                    evt.stopPropagation();\r\n                    slot(evt);\r\n                },\r\n                false\r\n            );\r\n            e.addEventListener(\"touchend\", slot, false);\r\n\r\n        } else {\r\n            e.addEventListener(name, slot, false);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Retire un attribut à l'élément sous-jacent.\r\n     * @example\r\n     * this.removeAttr(\"selected\");\r\n     * @memberof wdg\r\n     */\r\n    removeAttr: function() {\r\n        if (this._element) {\r\n            var i, arg;\r\n            for (i = 0 ; i < arguments.length ; i++) {\r\n                arg = arguments[i];\r\n                this._element.removeAttribute(arg);\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Teste l'existence d'un attribut dans l'élément sous-jacent.\r\n     * @memberof wdg\r\n     */\r\n    hasAttribute: function(key) {\r\n        if (!this._element) return false;\r\n        return this._element.hasAttribute(key);\r\n    },\r\n\r\n    /**\r\n     * Lit ou affecte la valeur d'un attribut de l'élément sous-jacent.\r\n     * @example\r\n     * // Le pseudo attribut '$' sert à insérer du texte.\r\n     * var div = new Widget();\r\n     * div.attr({$: 'Hello world!', title: 'Typical first sentence...'});\r\n     * @param key Nom de l'attribut ou dictionnaire des attributs.\r\n     * @param val [Facultatif] Valeur de l'attribut. Si elle est omise, la méthode retourne la valeur actuelle.\r\n     * @param ns [Facultatif] Namespace éventuel.\r\n     * @memberof wdg\r\n     */\r\n    attr: function(key, val, ns) {\r\n        var k;\r\n        if (!this._element || !this._element.getAttribute) return null;\r\n        if (typeof key == \"string\") {\r\n            if (val !== undefined) {\r\n                if (key == \"class\") {\r\n                    this._element.className = val;\r\n                    return this;\r\n                }\r\n                if (ns && this._element.setAttributeNS) {\r\n                    this._element.setAttributeNS(ns, key, val);\r\n                }\r\n                else {\r\n                    this._element.setAttribute(key, val);\r\n                }\r\n                return this;\r\n            }\r\n            return this._element.getAttribute(key);\r\n        }\r\n        if (typeof key == \"object\") {\r\n            for (k in key) {\r\n                if (k == \"class\") {\r\n                    this._element.className = key[k];\r\n                } else if (k == \"$\") {\r\n                    this.text(key[k]);\r\n                } else {\r\n                    this._element.setAttribute(k, key[k]);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n\r\n    /**\r\n     * Permet de changer le style de l'élément sous-jacent.\r\n     * @example\r\n     * this.css(\"color\", \"red\");\r\n     * alert(this.css(\"display\"));\r\n     * this.css(\r\n     *   {\r\n     *     margin: \"0px\",\r\n     *     padding: \"3px\",\r\n     *     border: \"1px solid black\"\r\n     *   }\r\n     * );\r\n     * @param key Nom du champ de style ou dictionnaire clefs/valeurs.\r\n     * @param val  Valeur du champ key.  S'il est omis et  que \"key\"\r\n     * est  de type  string,  alors la  méthode  retourne la  valeur\r\n     * actuelle.\r\n     * @memberof wdg\r\n     */\r\n    css: function(key, val) {\r\n        var k, e = this._element;\r\n        if (!e) return null;\r\n        if (typeof e.style !== 'object') {\r\n            console.error(\"[wdg.css] This element does not support styles!\", e);\r\n            e.style = {};\r\n        }\r\n        if (typeof key == 'string') {\r\n            if (val) {\r\n                e.style[key] = val;\r\n                return this;\r\n            }\r\n            return e.style[key];\r\n        }\r\n        if (typeof key == 'object') {\r\n            for (k in key) {\r\n                try {\r\n                    e.style[k] = key[k];\r\n                } catch (x) {\r\n                    console.error(\"[wdg.css] Bad CSS attribute \" + k + \": \" + key[k]);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    insertAfter: function(target) {\r\n        if (typeof target.element === 'function') {\r\n            target = target.element();\r\n        }\r\n        target.parentNode.insertBefore(this.element(), target.nextSibling);\r\n        return this;\r\n    },\r\n\r\n     insertBefore: function(target) {\r\n        if (typeof target.element === 'function') {\r\n            target = target.element();\r\n        }\r\n        target.parentNode.insertBefore(this.element(), target);\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Append children to this widget.\r\n     */\r\n    append: function() {\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            if (typeof arg === 'number') arg = \"\" + arg;\r\n            if (typeof arg === 'undefined' || (typeof arg !== 'object' && typeof arg !== 'string')) {\r\n                console.error(\"[Widget.append] Argument #\" + i + \" is invalid!\", arguments);\r\n                console.error(\"[Widget.append] Is type is: \" + (typeof arg));\r\n                continue;\r\n            };\r\n            if (typeof arg === 'string') {\r\n                if (arg.length < 1) arg = \" \";\r\n                arg = window.document.createTextNode(arg);\r\n                if (!arg) {\r\n                    console.error(\r\n                        \"[Widget.append] Unable to create a text node with this text: \", arg\r\n                    );\r\n                    console.error(\"[wdg] arguments=...\", arguments);\r\n                    throw Error(\r\n                        \"[Widget.append] Unable to create a text node with this text: \"\r\n                            + JSON.stringify(arg)\r\n                    );\r\n                }\r\n            }\r\n            if (Array.isArray(arg)) {\r\n                arg.forEach(\r\n                    function(item) {\r\n                        this.append(item);\r\n                    }, this\r\n                );\r\n            } else {\r\n                var e = typeof arg.element === 'function' ? arg.element() : arg;\r\n                this._element.appendChild(e);\r\n                /*\r\n                 if (typeof arg.onAppend === 'function') {\r\n                 arg.onAppend.call(arg);\r\n                 }\r\n                 */\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Append this widget to a parent.\r\n     * @param parent\r\n     * @memberof wdg\r\n     */\r\n    appendTo: function(parent) {\r\n        if (!parent) return this;\r\n        if (typeof parent.append === 'function') {\r\n            parent.append(this);\r\n        } else if (typeof parent.appendChild === 'function') {\r\n            parent.appendChild(this._element);\r\n            this.onAppend();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Append this widget to BODY.\r\n     * @memberof wdg\r\n     */\r\n    appendToBody: function() {\r\n        window.document.body.appendChild(this._element);\r\n        return this;\r\n    },\r\n\r\n    hasClass: function() {\r\n        var e = this._element.classList;\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            if (!e.contains(arg)) return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Add CSS classe(s) to this widget.\r\n     * @memberof wdg\r\n     */\r\n    addClass: function() {\r\n        var e = this._element.classList;\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            if (typeof arg === 'string') {\r\n                arg = arg.trim();\r\n                if (arg.length > 0) e.add(arg);\r\n            } else {\r\n                console.error(\"[wdg.addClass] Arguments with bad type!\", arguments);\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Remove CSS classe(s) to this widget.\r\n     * @memberof wdg\r\n     */\r\n    removeClass: function() {\r\n        var e = this._element.classList;\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            e.remove(arg);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Toggle CSS classe(s) to this widget.\r\n     * @memberof wdg\r\n     */\r\n    toggleClass: function() {\r\n        var e = this._element.classList;\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            e.toggle(arg);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Remove all children of this widget.\r\n     * Any argument passed will be appended to this widget.\r\n     * @memberof wdg\r\n     */\r\n    clear: function() {\r\n        // (!) On préfère retirer les éléments un par un du DOM plutôt que d'utiliser simplement\r\n        // this.html(\"\").\r\n        // En effet, le code simplifié a des conséquences inattendues dans IE9 et IE10 au moins.\r\n        // Le bug des markers qui disparaissaients sur les cartes de Trail-Passion 4 a été corrigé\r\n        // avec cette modification.\r\n        var e = this.element();\r\n        while(e.firstChild){\r\n            e.removeChild(e.firstChild);\r\n        }\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            this.append(arg);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * 1) Sans argument, cette  fonction retourne le texte contenu\r\n     * dans ce widget.\r\n     * 2) Avec  un texte en  argument, cette fonction  retire tous\r\n     * les  enfants de  ce widget  et  les remplace  par un  noeud\r\n     * texte.\r\n     * 3)  Avec un  élément  du DOM  en  argument, cette  fonction\r\n     * retourne le texte contenu par ce dernier.\r\n     * @memberof tfw.Widget\r\n     */\r\n    text: function(arg) {\r\n        var e, text, i, child;\r\n        if (typeof arg == 'string' || typeof arg == 'number') {\r\n            this.clear();\r\n            this._element.appendChild(window.document.createTextNode(arg));\r\n            return this;\r\n        } else {\r\n            // On retourne le contenu textuel de ce widget.\r\n            e = this._element;\r\n            if (arg !== undefined) {\r\n                // On peut passer un élément du DOM pour en extraire son contenu textuel.\r\n                e = arg;\r\n            }\r\n            text = \"\";\r\n            if (e.childNodes) {\r\n                for (i=0 ; i<e.childNodes.length ; i++) {\r\n                    child = e.childNodes[i];\r\n                    if (child.nodeType == 3) {\r\n                        if (child.nodeValue) {\r\n                            text += child.nodeValue;\r\n                        }\r\n                    } else {\r\n                        text += this.text( child );\r\n                    }\r\n                }\r\n            }\r\n            return text;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     *\r\n     * @param html\r\n     * @memberof wdg\r\n     */\r\n    html: function(html) {\r\n        if (typeof html === 'undefined') return this._element.innerHTML;\r\n        if (this._element) this._element.innerHTML = html;\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * If applicable, give focus to this element.\r\n     * @memberof wdg\r\n     */\r\n    focus: function() {\r\n        var e = this._element;\r\n        if (!e) return this;\r\n        if (typeof e.focus === 'function') {\r\n            e.focus();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Returns the bounds of the underlying element.\r\n     * @memberof wdg\r\n     */\r\n    rect: function() {\r\n        var e = this._element;\r\n        if (!e) return null;\r\n        return e.getBoundingClientRect();\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     *\r\n     * @param\r\n     * @memberof wdg\r\n     */\r\n    Tap: function(slot, sender) {\r\n        if (typeof slot === 'undefined') return this._Tap;\r\n        var that = this;\r\n        if (typeof sender === 'undefined') sender = that;\r\n        if (typeof slot === 'string') slot = sender[slot];\r\n        if (!this._Tap) {\r\n            this.activatePointerEvents();\r\n        }\r\n        this._Tap = [slot, sender];\r\n        return this;\r\n    }\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nWidget.prototype.activatePointerEvents = function() {\r\n    if (this._pointerEvents) return this;\r\n    this._pointerEvents = {start: 0};\r\n\r\n    /*\r\n     interact(this.element()).on(\"tap\", function(evt) {\r\n     var slot = that._Tap;\r\n     if (slot) {\r\n     slot[0].call(slot[1], {x: evt.x, y: evt.y});\r\n     }\r\n     });\r\n     return this;\r\n     */\r\n    var pe = this._pointerEvents;\r\n    var that = this;\r\n    this.addEvent(\r\n        \"touchstart\",\r\n        function(evt) {\r\n            console.log(\"touchestart\");\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            pe.touch = 1;\r\n            pe.start = Date.now();\r\n        }\r\n    );\r\n    this.addEvent(\r\n        \"touchend\",\r\n        function(evt) {\r\n            console.log(\"touchend\");\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            var tap = that._Tap;\r\n            if (!tap) return;\r\n            pe.touch = 0;\r\n            var delta = Date.now() - pe.start;\r\n            if (delta > 50) {\r\n                tap[0].call(tap[1], evt);\r\n            }\r\n        }\r\n    );\r\n    this.addEvent(\r\n        \"mousedown\",\r\n        function(evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            if (pe.touch) return;\r\n            console.log(\"mousedown\");\r\n            pe.start = Date.now();\r\n        }\r\n    );\r\n    this.addEvent(\r\n        \"mouseup\",\r\n        function(evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            console.log(\"mouseup\");\r\n            var tap = that._Tap;\r\n            if (!tap) return;\r\n            var delta = Date.now() - pe.start;\r\n            if (delta > 50) {\r\n                tap[0].call(tap[1], evt);\r\n            }\r\n        }\r\n    );\r\n\r\n    return this;\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nWidget.prototype.div = function() {\r\n    var div = new Widget();\r\n    for (var i = 0 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\nWidget.prototype.tag = function(tag) {\r\n    if (typeof tag === 'undefined') tag = 'div';\r\n    var div = new Widget({tag: tag});\r\n    for (var i = 1 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nWidget.prototype.isInDOM = function() {\r\n    return Widget.isInDOM(this.element());\r\n};\r\n\r\n/**\r\n * Fonction à surcharger  si on veut réagir lors de  l'insertion dans le\r\n * DOM.\r\n */\r\nWidget.prototype.onAppend = function() {};\r\n\r\nWidget.create = function(args) {\r\n    return new Widget(args);\r\n};\r\n\r\nWidget.find = function(query) {\r\n    return new Widget({element: window.document.querySelector(query)});\r\n};\r\n\r\n\r\n/**\r\n * Create a SVG élément with attributes.\r\n */\r\nWidget.svg = function(tag, attribs) {\r\n    var namespace = \"http://www.w3.org/2000/svg\";\r\n    if (typeof tag === 'object') {\r\n        attribs = tag;\r\n        tag = \"svg\";\r\n    }\r\n    if (typeof tag !== 'string') tag = 'svg';\r\n    var e = window.document.createElementNS(namespace, tag);\r\n    var w = new Widget({element: e});\r\n    if (typeof attribs === 'undefined') attribs = {};\r\n    if (tag == 'svg') {\r\n        if (typeof attribs.version === 'undefined') attribs.version = \"1.1\";\r\n        if (typeof attribs['xmlns:svg'] === 'undefined') {\r\n            attribs['xmlns:svg'] = 'http://www.w3.org/2000/svg';\r\n        }\r\n        if (typeof attribs['xmlns'] === 'undefined') {\r\n            attribs['xmlns'] = 'http://www.w3.org/2000/svg';\r\n        }\r\n        if (typeof attribs['xmlns:xlink'] === 'undefined') {\r\n            attribs['xmlns:xlink'] = 'http://www.w3.org/1999/xlink';\r\n        }\r\n        if (typeof attribs.viewBox === 'undefined'\r\n            && typeof attribs.width === 'number'\r\n            && typeof attribs.height === 'number')\r\n        {\r\n            attribs.viewBox = \"0 0 \" + attribs.width + \" \" + attribs.height;\r\n        }\r\n    }\r\n    if (typeof attribs === 'object') {\r\n        w.attr(attribs);\r\n    }\r\n    return w;\r\n};\r\n\r\n/**\r\n * Tester si le widget ou élément est actuellement attaché au DOM.\r\n */\r\nWidget.isInDOM = function(e) {\r\n    if (!e) return false;\r\n    if (typeof e.element === 'function') {\r\n        e = e.element();\r\n    }\r\n    if (e === window.document) return true;\r\n    return Widget.isInDOM(e.parentNode);\r\n};\r\n\r\n\r\n/**\r\n * Create a DIV and apply all arguments as classes to it.\r\n */\r\nWidget.div = function() {\r\n    var div = new Widget({tag: \"div\"});\r\n    for (var i = 0 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\n/**\r\n * Create a SPAN and apply all arguments as classes to it.\r\n */\r\nWidget.span = function() {\r\n    var div = new Widget({tag: \"span\"});\r\n    for (var i = 0 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\nWidget.tag = function(tag) {\r\n    if (typeof tag === 'undefined') tag = 'div';\r\n    var div = new Widget({tag: tag});\r\n    for (var i = 1 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\nWidget.id = function(id) {\r\n    return new Widget({element: window.document.getElementById(id)});\r\n};\r\n\r\n/**\r\n * Widget defining the `document.body` element.\r\n */\r\nWidget.body = new Widget(window.document.body);\r\n\r\nmodule.exports = Widget;\r\n\r\n\r\n\r\n/*\r\n * classList.js: Cross-browser full element.classList implementation.\r\n * 2014-07-23\r\n *\r\n * http://purl.eligrey.com/github/classList.js/blob/master/classList.js\r\n *\r\n * By Eli Grey, http://eligrey.com\r\n * Public Domain.\r\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\r\n */\r\n\r\n// Full polyfill for browsers with no classList support\r\nif (!(\"classList\" in window.document.createElement(\"_\"))) {\r\n    (function () {\r\n        \"use strict\";\r\n\r\n        if (!('Element' in window)) return;\r\n\r\n        var classListProp = \"classList\";\r\n        var protoProp = \"prototype\";\r\n        var elemCtrProto = window.Element[protoProp];\r\n        var objCtr = Object;\r\n        var strTrim = String.prototype.trim || function () {\r\n            var rx = new RegExp(\"^\\\\s+|\\\\s+$\", \"g\");\r\n            return this.replace(rx, '');\r\n        };\r\n        var arrIndexOf = Array[protoProp].indexOf || function (item) {\r\n            var\r\n            i = 0\r\n            , len = this.length\r\n            ;\r\n            for (; i < len; i++) {\r\n                if (i in this && this[i] === item) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n        // Vendors: please allow content code to instantiate DOMExceptions\r\n        , DOMEx = function (type, message) {\r\n            this.name = type;\r\n            this.code = DOMException[type];\r\n            this.message = message;\r\n        }\r\n        , checkTokenAndGetIndex = function (classList, token) {\r\n            if (token === \"\") {\r\n                throw new DOMEx(\r\n                    \"SYNTAX_ERR\"\r\n                    , \"An invalid or illegal string was specified\"\r\n                );\r\n            }\r\n            if ((new RegExp(\"\\\\s\")).test(token)) {\r\n                throw new DOMEx(\r\n                    \"INVALID_CHARACTER_ERR\"\r\n                    , \"String contains an invalid character\"\r\n                );\r\n            }\r\n            return arrIndexOf.call(classList, token);\r\n        }\r\n        , ClassList = function (elem) {\r\n            var\r\n            trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\r\n            , classes = trimmedClasses ? trimmedClasses.split(new RegExp(\"\\\\s+\")) : []\r\n            , i = 0\r\n            , len = classes.length\r\n            ;\r\n            for (; i < len; i++) {\r\n                this.push(classes[i]);\r\n            }\r\n            this._updateClassName = function () {\r\n                elem.setAttribute(\"class\", this.toString());\r\n            };\r\n        }\r\n        , classListProto = ClassList[protoProp] = []\r\n        , classListGetter = function () {\r\n            return new ClassList(this);\r\n        }\r\n        ;\r\n\r\n        // Most DOMException implementations don't allow calling DOMException's toString()\r\n        // on non-DOMExceptions. Error's toString() is sufficient here.\r\n        DOMEx[protoProp] = Error[protoProp];\r\n        classListProto.item = function (i) {\r\n            return this[i] || null;\r\n        };\r\n        classListProto.contains = function (token) {\r\n            token += \"\";\r\n            return checkTokenAndGetIndex(this, token) !== -1;\r\n        };\r\n        classListProto.add = function () {\r\n            var\r\n            tokens = arguments\r\n            , i = 0\r\n            , l = tokens.length\r\n            , token\r\n            , updated = false\r\n            ;\r\n            do {\r\n                token = tokens[i] + \"\";\r\n                if (checkTokenAndGetIndex(this, token) === -1) {\r\n                    this.push(token);\r\n                    updated = true;\r\n                }\r\n            }\r\n            while (++i < l);\r\n\r\n            if (updated) {\r\n                this._updateClassName();\r\n            }\r\n        };\r\n        classListProto.remove = function () {\r\n            var\r\n            tokens = arguments\r\n            , i = 0\r\n            , l = tokens.length\r\n            , token\r\n            , updated = false\r\n            , index\r\n            ;\r\n            do {\r\n                token = tokens[i] + \"\";\r\n                index = checkTokenAndGetIndex(this, token);\r\n                while (index !== -1) {\r\n                    this.splice(index, 1);\r\n                    updated = true;\r\n                    index = checkTokenAndGetIndex(this, token);\r\n                }\r\n            }\r\n            while (++i < l);\r\n\r\n            if (updated) {\r\n                this._updateClassName();\r\n            }\r\n        };\r\n        classListProto.toggle = function (token, force) {\r\n            token += \"\";\r\n\r\n            var\r\n            result = this.contains(token)\r\n            , method = result ?\r\n                force !== true && \"remove\"\r\n                :\r\n                force !== false && \"add\"\r\n            ;\r\n\r\n            if (method) {\r\n                this[method](token);\r\n            }\r\n\r\n            if (force === true || force === false) {\r\n                return force;\r\n            } else {\r\n                return !result;\r\n            }\r\n        };\r\n        classListProto.toString = function () {\r\n            return this.join(\" \");\r\n        };\r\n\r\n        if (objCtr.defineProperty) {\r\n            var classListPropDesc = {\r\n                get: classListGetter, enumerable: true, configurable: true\r\n            };\r\n            try {\r\n                objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n            } catch (ex) { // IE 8 doesn't support enumerable:true\r\n                if (ex.number === -0x7FF5EC54) {\r\n                    classListPropDesc.enumerable = false;\r\n                    objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n                }\r\n            }\r\n        } else if (objCtr[protoProp].__defineGetter__) {\r\n            elemCtrProto.__defineGetter__(classListProp, classListGetter);\r\n        }\r\n    }());\r\n} else {\r\n    // There is full or partial native classList support, so just check if we need\r\n    // to normalize the add/remove and toggle APIs.\r\n    (function () {\r\n        \"use strict\";\r\n\r\n        var testElement = window.document.createElement(\"_\");\r\n\r\n        testElement.classList.add(\"c1\", \"c2\");\r\n\r\n        // Polyfill for IE 10/11 and Firefox <26, where classList.add and\r\n        // classList.remove exist but support only one argument at a time.\r\n        if (!testElement.classList.contains(\"c2\")) {\r\n            var createMethod = function(method) {\r\n                var original = DOMTokenList.prototype[method];\r\n\r\n                DOMTokenList.prototype[method] = function(token) {\r\n                    var i, len = arguments.length;\r\n\r\n                    for (i = 0; i < len; i++) {\r\n                        token = arguments[i];\r\n                        original.call(this, token);\r\n                    }\r\n                };\r\n            };\r\n            createMethod('add');\r\n            createMethod('remove');\r\n        }\r\n\r\n        testElement.classList.toggle(\"c3\", false);\r\n\r\n        // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\r\n        // support the second argument.\r\n        if (testElement.classList.contains(\"c3\")) {\r\n            var _toggle = DOMTokenList.prototype.toggle;\r\n\r\n            DOMTokenList.prototype.toggle = function(token, force) {\r\n                if (1 in arguments && !this.contains(token) === !force) {\r\n                    return force;\r\n                } else {\r\n                    return _toggle.call(this, token);\r\n                }\r\n            };\r\n\r\n        }\r\n        testElement = null;\r\n    }());\r\n}\r\n }\r\n"],"names":["addListener","e","l","window","addEventListener","attachEvent","require","modules","id","body","mod","err","Error","console","error","stack","exports","document","parentNode","$data","APP","setTimeout","start","window","exports","module","config","name","description","author","version","major","minor","revision","date","Date","currentLang","lang","undefined","localStorage","getItem","navigator","language","browserLanguage","substr","toLowerCase","setItem","intl","words","params","txt","newTxt","i","c","lastIdx","pos","dic","k","console","error","length","charAt","substring","charCodeAt","window","exports","module","Plane","require","texture","colors","data","width","res","localStorage","setItem","location","reload","getItem","parseInt","isNaN","document","getElementById","removeAttribute","setAttribute","j","rr","Math","floor","random","gg","bb","push","cos","PI","plane","render","time","uniform","X","Y","Z","resolution","start","window","exports","module","initShaders","gl","code","fragmentShader","createShader","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","Error","getShaderInfoLog","vertexShader","VERTEX_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","vertexPositionAttribute","getAttribLocation","enableVertexAttribArray","this","_shaderProgram","_vertexPositionAttribute","initBuffers","W","H","squareVerticesBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","vertices","bufferData","Float32Array","STATIC_DRAW","Plane","require","args","canvasId","fragmentShaderId","uniform","texture","resolution","_args","canvas","document","getElementById","fragmentShaderElement","textContent","trim","rect","getBoundingClientRect","width","height","setAttribute","getContext","call","_squareVerticesBuffer","key","val","textureIndex","data","Array","isArray","Uint8Array","tex","createTexture","bindTexture","TEXTURE_2D","Math","floor","length","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","generateMipmap","location","getUniformLocation","activeTexture","TEXTURE0","uniform1i","_gl","_started","prototype","start","render","time","that","vertexAttribPointer","FLOAT","f","uniform1f","drawArrays","TRIANGLE_STRIP","requestAnimationFrame","window","exports","module","Widget","options","this","__data","e","innerHTML","childNodes","element","tag","id","document","getElementById","Error","createElement","addClass","ex","console","error","JSON","stringify","prototype","v","undefined","_element","querySelector","data","k","detach","p","parentNode","removeChild","addEvent","name","slot","sender","key","x","f","call","addEventListener","evt","preventDefault","stopPropagation","removeAttr","i","arg","arguments","length","removeAttribute","hasAttribute","attr","val","ns","getAttribute","className","setAttributeNS","setAttribute","text","css","style","insertAfter","target","insertBefore","nextSibling","append","createTextNode","Array","isArray","forEach","item","appendChild","appendTo","parent","onAppend","appendToBody","body","hasClass","classList","contains","trim","add","removeClass","remove","toggleClass","toggle","clear","firstChild","child","nodeType","nodeValue","html","focus","rect","getBoundingClientRect","Tap","_Tap","that","activatePointerEvents","_pointerEvents","start","pe","log","touch","Date","now","tap","delta","div","isInDOM","create","args","find","query","svg","attribs","namespace","createElementNS","w","version","viewBox","width","height","span","testElement","createMethod","method","original","DOMTokenList","token","len","_toggle","force","classListProp","protoProp","elemCtrProto","Element","objCtr","Object","strTrim","String","rx","RegExp","replace","arrIndexOf","indexOf","DOMEx","type","message","code","DOMException","checkTokenAndGetIndex","test","ClassList","elem","trimmedClasses","classes","split","push","_updateClassName","toString","classListProto","classListGetter","tokens","l","updated","index","splice","result","join","defineProperty","classListPropDesc","get","enumerable","configurable","number","__defineGetter__"],"mappings":"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"}